/*
Modify:
  12.07.2006 SVS
    ! kill class int64
  04.07.2006 IS
    - warnings
  08.05.2006 AY
    ! Вызываем EE_READ тока в одном месте и в нужный момент. (mantis#147)
  06.05.2006 SVS
    ! ProcessEditorEvent(EE_READ) вызывается в FileEditor`е
  24.03.2006 AY
    - Добил глюк с раскраской в неполноэкраных редакторах.
  24.03.2006 AY
    - Не правильное позиционирование курсора при ReverseReplace.
  24.02.2006 AY
    - Неправильно рисовались вертикальные блоки и раскраска в редакторах с X1!=0.
  06.10.2005 SVS
    - Bugz#1169 - сломали в районе 2012.
  26.07.2005 SVS
    - Некомпиляция дебажной версии
  24.07.2005 WARP
    ! see 02033.LockUnlock.txt
  15.07.2005 AY
    - Убрал всё связанное с USE_OLDEXPANDTABS
    ! InitUseDecodeTable,InitTableNum,InitAnsiText переехали в global.cpp
  05.07.2005 SVS
    ! Все настройки, относящиеся к редактору внесены в структуру EditorOptions
  02.07.2005 AY
    ! Открываем файлы в WIN по умолчанию.
  02.07.2005 AY + WARP
    ! Неверный leftpos после ECTL_INSERTTEXT+ECTL_SETPOSITION
  21.06.2005 SKV
    + AllowEmptySpaceAfterEof
  24.04.2005 AY
    ! GCC
  29.03.2005 SVS
    - BugZ#1237 - некоректное значение EditorInfo.BlockStartLine
  06.01.2005 WARP
    ! Добавки к трехпозиционному ExpandTabs
  23.12.2004 WARP
    ! 3-х позиционный ExpandTab (старая функциональность возвращается компиляцией с USE_OLDEXPANDTABS)
  11.11.2004 SVS
    + Обработка MCODE_V_ITEMCOUNT и MCODE_V_CURPOS, MCODE_V_EDITORCURLINE, MCODE_V_EDITORCURPOS, MCODE_V_EDITORLINES
  13.10.2004 SVS
    - Проблемы с выделением и работой плагинов
  07.10.2004 SVS
    - BugZ1168 - В редакторе не работают длинные макросы
  06.08.2004 SKV
    ! see 01825.MSVCRT.txt
  07.07.2004 SVS
    ! Macro II
  30.06.2004 SVS
    + Небольшая добавка по поводу Macro II (в "обычном" ФАРе не работает, т.к. ограничена дефайном MACRODRIVE2)
  16.06.2004 SVS
    - BugZ#1101 - появляется лишнее выделение
  15.06.2004 SVS
    - BugZ#1096 - shiftins в залоченном файле - двойное выделение.
  29.05.2004 SVS
    - BugZ#1048 - Сдвигается влево отображение в редакторе по CtrlShiftEnd
      Строку "CurLine->EditLine.ObjWidth=X2-X1;" нужно было ставить до
      вызова "ProcessKey(KEY_END);"!!!
  29.05.2004 SVS
    - Bugz#794 - пометка блока остается при удалении текста
  17.05.2004 SVS
    - BugZ#1080 - Редактор. CtrlIns/CtrlC без выделения не работают
  11.05.2004 SVS
    ! В связи с введением макрокоманды $IClip уточним работу с
      UsedInternalClipboard для Ctrl-P и Ctrl-M
  02.03.2004 SVS
    ! Уточнение Editor::SaveData()
  24.02.2004 SVS
    - Ctrl+End в редакторе
  12.01.2004 IS
   - баг: неверно "скачем по словам", когда разделители слов содержат символы
     с кодами больше 128. Решение: для сравнения с WordDiv используем
     IsWordDiv, а не strchr
  14.12.2003 SVS
    - BugZ#1002 - ESPT_SETWORDDIV не влияет на переход по словам
  04.11.2003 SKV
    ! shift-left shift-right теперь не оставляют пустого выделения.
  26.10.2003 KM
    ! Поскольку теперь GlobalSearchString может хранить строку в 16 представлении,
      тогда перед копированием её в LastSearchStr проверим этот режим и при необходимости
      сконвертируем в обычный строковый формат.
  20.10.2003 SVS
    ! переименование
        KEY_MACRO_EDITSELECTED -> KEY_MACRO_SELECTED
        KEY_MACRO_CHECKEOF     -> KEY_MACRO_EOF
    + Обработка KEY_MACRO_EMPTY и KEY_MACRO_BOF
  20.10.2003 SVS
    ! Уточнение размера под вставку даты
  13.10.2003 SVS
    ! ESPT_WORDDIV -> ESPT_SETWORDDIV (NotInternal)
  10.10.2003 SVS
    + EditorOptions.WordDiv
    + ESPT_WORDDIV
  09.10.2003 SVS
    ! Первое исправления "для колорера"
    - Траблы с вертикальными постоянными блоками
  04.10.2003 SVS
    + KEY_MACRO_CHECKEOF - проверка конца файла
  26.09.2003 SVS
    ! Изменения в названиях макроклавиш
    + Добавлена индикация Ctrl-Q в статусной строке - символ '"'
  17.09.2003 SVS
    - Неправильно "исправил" в прошлый раз вставку KEY_MACROPLAINTEXT и KEY_MACRODATE.
      не учел тот факт, что $Date может быть без аргументов
    - Отвалились макросы (например, Alt-Shift-Left=Alt-Left) после 1687
  12.09.2003 SVS
    ! Динамически выделим буфер при вставке Plain-text от макроса.
      Для этого воспользуемся новой функцией
      CtrlObject->Macro.GetMacroPlainTextSize(), чтобы получить
      размер строки.
  08.09.2003 SVS
    + Обработка KEY_MACROPLAINTEXT
  02.09.2003 SKV
    - фикс выделения shift-up при отключенном cursor beyond end of line
  31.07.2003 SKV
    - фикс выделения персистентных блоков после Shift-[A-Z0-9]
  25.07.2003 SVS
    ! выставим SetLastError в Editor::ReadFile в случае неудачи.
  15.07.2003 SVS
    - Del/Bs в самой последней позиции ничего не удаляет, поэтому не модифицируем...
  05.06.2003 SVS
    - XLat, если ничего не сконвертил, все равно ставит модификацию текста.
  05.06.2003 SKV
    - Правка выделения в тексте с табуляцией и режиме !CursorBeyonEOL.
  06.05.2003 SVS
    ! Работа с закладками вынесена в отдельные функции SetBookmark() и GotoBookmark()
  28.04.2003 SVS
    ! Изменены параметры SaveData + немного очередных уточнений
  15.04.2003 SVS
    - Перестали работать некоторые функциональные клавиши (например, F1 -
      вызов помощи) во время работы плагинов, использующих ProcessEditorInput
      (например, AutoWrap)
      Перенесем ECTL_PROCESSINPUT и ECTL_READINPUT из Editor в FileEditor
  15.04.2003 VVM
    ! После поиска отступим на четверть и проверим на перекрытие диалогом замены
  31.03.2003 SVS
    + _SYS_EE_REDRAW
  05.03.2003 SVS
    + Editor::ReadData, Editor::SaveData (пока невалидны с точки зрения работы) - для DI_MEMOEDIT
    ! Закоментим _SVS
  25.02.2003 SVS
    ! "free/malloc/realloc -> xf_*" - что-то в прошлый раз пропустил.
  14.02.2003 SVS
    ! Детализация логов для ECTL_
  05.02.2003 SKV
    - little selection fix (deselection with shift-down on lines with tabs).
  26.01.2003 IS
    ! FAR_CreateFile - обертка для CreateFile, просьба использовать именно
      ее вместо CreateFile
  24.01.2003 KM
    ! По окончании поиска отступим от верха экрана на
      треть отображаемой высоты. А то уж действительно
      неудобно получается оценивать найденное.
  10.01.2003 SVS
    ! Ctrl-P/Crtl-M в редакторе при постоянных блоках.
      Изменим немного поведение этих действий, исключив виндовый клипборд
      (see перемнную UsedInternalClipboard и clipboard.cpp)
  17.12.2002 SVS
    ! Изменен принцип работы с EditorPosCache (see класс FilePositionCache)
  11.12.2002 SVS
    - В EditorControl (ECTL_READINPUT) полечим вариант события для KEY_CONSOLE_BUFFER_RESIZE
  05.12.2002 SVS
    ! Применим новую MkStrFTime(), сократив немного кода
  12.11.2002 DJ
    - исправление поведения Ctrl-Shift-Left за концом строки
    ! теперь ECTL_GETSTRING для выделения за концом строки возвращает настоящие
      координаты, а не скорректированные
  10.11.2002 SKV
    - BugZ#690, выделение...
  08.11.2002 SVS
    ! Очередная порция отучения Editor от понятия "файл":
      * Editor::PluginData уехал в FileEditor::PluginData
      * Editor::SetPluginData() уехал в FileEditor::SetPluginData()
      * Команды ECTL_EDITORTOOEM, ECTL_OEMTOEDITOR и ECTL_GETBOOKMARKS
        исполняются на уровне FileEditor (для DI_MEMOEDIT ЭТОГО ненать)
      * ECTL_GETINFO разбит на 2 части. В FileEditor заполняется поле
        EditorInfo.FileName.
      * KEY_CTRLF - теперь обрабатывается в FileEditor::ProcessKey()
      * Из Editor::~Editor() немного кода вынесено туда, где и должно быть
        в FileEditor::~FileEditor()
      * Editor::ReadFile() - Name уже в полном формате!!!
        посему закомментим "преобразовалку" - нефига воду в ступе толочь
  07.11.2002 SVS
    ! Немного _SVS() для отладки :-)
  04.11.2002 SKV
    - Undo на последней строке
  28.10.2002
    - выделение с табами.
  18.10.2002 SKV
    - UnmarkEmptyBlock, не надо бурить его целиком.
  14.10.2002 SVS
    - BugZ#684 - ECTL_SETPOSITION с отрицательным столбцом
  14.10.2002 SKV
    ! выделение переписано заново
  09.10.2002 SKV
    - selection bugs
  26.09.2002 SKV
    - еще раз удаление блока
    - еще раз выделение
  21.09.2002 VVM
    - Падение при удалении блока. Портился стек.
  19.09.2002 SKV
    - BugZ#643. Выделение, набор текста с шифтом.
  18.09.2002 SKV
    - Опять выделение. На сей раз в !EdOpt.CursorBeyondEOL режиме.
  17.09.2002 SKV
    - BugZ#538, продолжение эпопеи выделения.
  17.09.2002 SVS
    - BugZ#616 - ctrl-shift-alt в редакторе
      "На экране диалог замены ("replace"). Нажимаю ctrl-shift-alt,
      он исчезает, но под ним оказывается еще один - "search".
      Не совсем логично."
  17.09.2002 SKV
    - выделение
  04.09.2002 SVS
    ! Структура EditList пеехала из editor.cpp в edit.hpp
    ! Класс Editor "потерял" свойство запоминать файлы самостоятельно,
      теперь это привелегия FileEditor`а
    ! Команда ECTL_SAVEFILE обрабатывается в FileEditor::EditorControl
    ! Команда ECTL_QUIT обрабатывается в FileEditor::EditorControl
    ! Команда ECTL_SETTITLE обрабатывается в FileEditor::EditorControl
    ! Код Editor::ShowStatus() переехал в FileEditor::ShowStatus()
  27.08.2002 SVS
    ! Убираем EditorInfo.WindowPos
  19.08.2002 SVS
    + ECTL_DELETEBLOCK - удалить блок в редакторе. Функция вернет TRUE
      в случае удачного удаления блока и FALSE, если редактор заблокирован
      (пользователь нажат Ctrl-L) или нет выделенного блока.
  06.08.2002 IS
    - Баг: падение в ECTL_SETSTRING при отрицательном StringLength.
      Проверяем корректность StringLength и вернем FALSE, если оно меньше
      нуля.
  23.07.2002 SKV
    - Еще одна попытка разобраться с выделением.
  12.07.2002 SVS
    ! Очередная "потеха" для "Editor Not File" - перенесем обработку F1
      из Editor в FileEditor
  10.07.2002 SKV
    - Shift-Up на пустых строках.
  02.07.2002 SKV
    - Bugz#538 - В ECTL_SETPOSITION Pos проверяется не только на -1,
      но и на полное совпадение с текущей позицией перед выставлением
      FEDITOR_CURPOSCHANGEDBYPLUGIN.
  25.06.2002 SVS
    ! Косметика:  BitFlags::Skip -> BitFlags::Clear
    ! В редакторе (Editor) и вьювере (Viewer) отказываемся от абс. значений
      размеров в пользу относительных (т.е. вместо ScrX/ScrY применяем
      ObjWidth/ObjHeight).
    ! Если редактор/вьювер не в FullScreen, то не отображаем часики
    ! классу Editor нафиг ненужен кейбар - это привелегия FileEditor
      посему ECTL_SETKEYBAR переехал из Editor в FileEditor
  24.06.2002 SKV
    - Установим флажок PersistentBlock у новосозданных строк из опций.
  24.06.2002 SKV
    - Неисчезающее выделение.
  24.06.2002 SKV
    - При Shift-Down надо сбрасывать FEDITOR_CURPOSCHANGEDBYPLUGIN.
  17.06.2002 SVS
    - BugZ#557 - FAR builtin editor crash on invalid attributes of LastPositions
  14.06.2002 IS
    ! Тело SetDeleteOnClose переехало в editor.cpp
    ! Параметр у SetDeleteOnClose стал int:
        0 - не удалять ничего
        1 - удалять файл и каталог
        2 - удалять только файл
    + Обработка FEDITOR_DELETEONLYFILEONCLOSE
  10.06.2002 SVS
    - некорректно поведение редактора для $Date & Ctrl-F
  24.05.2002 SVS
    + Дублирование Numpad-клавиш
    ! "FAR_VerticalBlock" -> FAR_VerticalBlock
  24.05.2002 SKV
    - пробел меняем на 0x0d, получаем зависание. (Bugz#524)
  22.05.2002 SVS
    ! CurrentEditor инициализируется в FileEditor
  18.05.2002 SVS
    ! Возможность компиляции под BC 5.5
    ! ФЛАГИ - сведем в кучу двухпозиционные переменные
  13.05.2002 VVM
    + EditorInfo.WindowPos - номер окна редактора. Может использоваться с ACTL_*WINDOW*
  06.05.2002 KM
    - AltF8 AltF9... Oops!
  29.04.2002 SVS
    - не туда залудил этот BugZ#488
  29.04.2002 SVS
    - BugZ#488 - Shift=enter
  18.04.2002 SKV
    ! При чтении позиции из кэша разворачиваем палки / в \
    ! Перепозиционирование курсора и topline при alt-f9 в конце длинного файла.
  04.04.2002 SVS
    ! ECTL_TURNOFFMARKINGBLOK -> ECTL_TURNOFFMARKINGBLOCK
  04.04.2002 IS
    + ECTL_TURNOFFMARKINGBLOK: убрать флаг редактора "осуществляется
      выделение блока"
  30.03.2002 IS
    - Уберем пока установление FEDITOR_WASCHANGED в Undo (см. комментарии в теле
      функции) в надежде убрать баг, когда Фар пытается запихнуть файл в архив,
      который был вытащен из него по F4 и был изменен, а потом изменение было
      отменено при помощи Alt-BackSpace.
  23.03.2002 IS
    + ESPT_LOCKMODE - запретить/отменить изменение файла из плагина
  23.03.2002 VVM
    + Прокрутка на 1 позиция с нажатым Альт. (Мышиное колесо)
  19.03.2002 SVS
    + Легализуем формат MAC_EOL_fmt
  18.03.2002 IS
    - Попытка избавиться от проблем выделения при наличии колорера и
      Shift-Down, Shift-End (BugZ#319)
  10.03.2002 IS
    ! UnmarkEmptyBlock теперь нормально работает с вертикальными блоками
      (раньше их не видела вообще и снимала выделение даже при не пустом блоке)
  07.03.2002 IS
    + UnmarkEmptyBlock(): удалить выделение, если оно пустое (выделено ноль
      символов в ширину)
    ! BugZ#328: Del не работает, когда Shift-Left, Shift-Right, Del
      ([ ] Постоянные блоки, [x] Del удаляет блоки)
    ! BugZ#326: не корректная работа ESPT_CHARTABLE (выделение левого пункта
      в меню по Shift-F8)
  06.03.2002 SVS
    - Бага с выделением при постоянных блоках.
  03.03.2002 SVS
    ! По поводу трапа (патч от 28.06.2000) "более 1000 колонок"
      Нефига заниматься ерундой в стиле "взять, изменить, наложить",
      достаточно одной операции - "изменить" :-)
  22.02.2002 SVS
    ! Коррекция в связи с введение FAR_INT64
  21.02.2002 SKV
    - Порча EOL'а строки при вставке оной.
  19.02.2002 SVS
    - По поводу Ins - пока не жмакнули стрелку - размер курсора не изменился :-(
  15.02.2002 SVS
    ! Вызов ShowProcessList() вынесен в манагер
    ! Для Ctrl-L сделаем обновление не всего экрана, а только статусной линии
    ! Ins - тоже нефига перерисовывать весь экран
  06.02.2002 IS
    - Костыль для обработки CtrlShiftEnd, которая полетела после 1224
  05.02.2002 SVS
    ! Технологический патч - про сислоги
  05.02.2002 SVS
    ! Editor::IsShiftKey() -> keyboard.cpp::IsShiftKey()
  04.02.2002 IS
    ! Уточним проверку наличия выделения в shift-(left|right) и shift-end
      чтобы исправить жука 280.
  29.01.2002 SVS
    - непостоянные блоки, Alt-F8 Enter - выделение блока не снимается
  28.01.2002 VVM
    + FreeAllocatedDaat()
  19.01.2002 IS
    ! Переместим проверку выделения из ctrl-shift-(left|right) на уровень
      ниже - в shift-(left|right), чтобы добить жука 226.
  18.01.2002 SKV
    - CtrlShiftEnd bug fix
  15.01.2002 SVS
    ! Флаги вместо кучи переменных типа int
    ! Первая серия по отучиванию класса Editor слову "Файл"
    ! ProcessEditorInput ушел в FileEditor (в диалога плагины не...)
  14.01.2002 SVS
    ! DOS_EOL_fmt[], UNIX_EOL_fmt (в global.?pp)
    - ФАР не компилился под MSVC после 1168.
  12.01.2002 IS
    ! Вместо "\r\n" и "\n" используем специальные константы: DOS_EOL_fmt и
      UNIX_EOL_fmt.
    ! Пропишем тип конца строки по умолчанию явно - DOS_EOL_fmt.
    ! Немного const
  11.01.2002 IS
    - Странное поведение после 1160
  10.01.2002 SVS
    + ECTLToName - для логов
  07.01.2002 IS
    - Выделялось не то, что нужно, при использовании ctrl-shift-(left|right),
      если перед этим позиция была изменена плагином, а не самим Фаром, а при
      этом имелась в наличии ранее выделенная область
  28.12.2001 SVS
    ! Правка с учетом изменений структур (про анонимный union)
  28.12.2001 VVM
    ! Проверить на успешную запись перед сбросом флага изменений.
  25.12.2001 SVS
    + При изменении размеров консоли перед прорисовкой редактора вызовем
      ProcessEditorEvent(EE_REDRAW,EEREDRAW_ALL).
      Но здесь эээ... колорер реагирует только на EEREDRAW_CHANGE
      (сам себе злобный буратино ;-()
  24.12.2001 SVS
    - Бага компиляции в Editor::ProcessEditorInput - лищняя скобка
  14.12.2001 IS
    ! stricmp -> LocalStricmp
  14.12.2001 IS
    ! внедрение const в соответствии с изменениями класса Edit
  10.12.2001 SVS
    - BugZ#164. При вставке имени файла (Ctrl-F) портилось оригинальное
      имя файла.
  03.12.2001 IS
    ! UndoData - теперь указатель. Размер буфера undo можно изменить
      через реестр.
  03.12.2001 VVM
    ! 1. Имеем 2 строки, втоная длиннее первой.
      2. Встаем на 2 строку впозиции после конца первой, но до второй.
      3. Shift-Up; Shift-End
      4. Можем выделять второй блок, не связанный с первым...
  09.11.2001 IS
    -  проклятое место - EditorF7Rules,
       опять фиксим, т.к. не соответствует заявленному в techinfo.
  05.11.2001
    SVS: ! ESPT_SETTABLE -> ESPT_CHARTABLE: все остальные ESPT_* тоже
           устанавливают, но SET  в  их  названии  нету.
    IS:  ! При неудачной смене таблицы по ESPT_SETTABLE оставим все как есть
           (раньше включали oem).
  01.11.2001 SVS
    ! ECTL_GETBOOKMARK, EditorBookMark -> ECTL_GETBOOKMARKS, EditorBookMarks
    ! С помощью IsBadWritePtr проверим на вшивость адресное пространство
  29.10.2001 IS
    ! SaveEditorPos и SaveEditorShortPos переехали в EditorOptions
      Теперь они локальны для каждой копии редактора, а первая опция может
      быть изменена плагином.
  28.10.2001 SVS
    ! Приведем к одному знаманателю реакцию на вставку путей (то же как и
      в панелях)
  24.10.2001 SVS
    ! обработка вставки имени файла и пути вынесена на уровень редактора, т.к.
      при выделеном блоке в несколько строк получаем лабуду.
    ! Корректно выставим последовательность отмены действий - DeleteBlock()
      сам умеет выставлять ундо
    - Аналогичная ситуация с Ctrl-F - при выделенном не персистентном блоке
      сам блок не удаляется.
  21.10.2001 SVS
    + CALLBACK-функция для избавления от BugZ#85
  19.10.2001 OT
    - Исправление ошибки HyperViewer
  16.10.2001 SKV
    - баг при выделении вертикальных блоков
      после переключения EdOpt.CursorBeyondEOL туда сюда.
  15.10.2001 SVS
    + _KEYMACRO()
  11.10.2001 IS
    + обработка DeleteOnClose
    ! внедрение const
  11.10.2001 VVM
    ! Полное имя файла вставляет CTRL+F (вместо CTRL+SHIFT+ENTER)
  10.10.2001 SVS
    + EditorInfo.CurState
  27.09.2001 IS
    - Левый размер при использовании strncpy
  24.09.2001 SKV
    - ctrl-left fix
  18.08.2001 SVS
    ! параметр у функции Paste - для отработки $Date, у которой есть '%n',
      соответственно изненен код обработки "клавиши" KEY_MACRODATE.
  14.09.2001 SVS
    ! Немного SysLog`ов
  13.09.2001 SKV
    - Shift-End на длииинной строке в блоке с изменённым цветом фона.
  30.08.2001 IS
    - Неопределенное поведение при использовании ECTL_SETPOSITION: режим
      Overtype не менялся, хотя и должен был в этой функции.
  07.08.2001 IS
    + Обработка ESPT_SETTABLE - смена кодировки.
  25.07.2001 IS
    - Баг: в меню по shift-f8 выделялась строка с той кодировкой, которая
      автоматически определилась при открытии файла, даже если текущая
      кодировка была другой. Решение: при открытии файла принудительно
      сбросим номер таблицы символов, если UseDecodeTable==FALSE.
  24.07.2001 IS
    ! Замена проверки на ' ' и '\t' на вызов isspace
  10.07.2001 SVS
    + Обработка KEY_MACROXLAT
  27.06.2001 SVS
    - Stream Block можно двигать в залоченном состоянии :-((
  25.06.2001 IS
    ! Внедрение const
  25.06.2001 SVS
    ! Юзаем SEARCHSTRINGBUFSIZE
  22.06.2001 SVS
    + обработка KEY_MACRODATE
  11.06.2001 SVS
    ! Новые параметры у GetSearchReplaceString() - указывающие размеры буферов
  10.06.2001 IS
    - Баг: зачем-то при продолжении _обратного_ поиска прокручивались на шаг
      _вперед_.
  08.06.2001 IS
    - Баги в некоторых местах из-за использования strcpy, а не strncpy, в
      результате чего гадили в память.
  06.06.2001 SVS
    + EDITOR_UNDO_COUNT - "от чисел к символам"
    + ECTL_GETBOOKMARK - получить инфу о закладках.
    ! Небольшая переделка с учетом InternalEditorBookMark.
  04.06.2001 IS
    - Editor::SaveFile - убраны (с подачи SVS) потенциальные баги - выход из
      функции был до того, как восстановятся атрибуты файла
  03.06.2001 OT
    - Не обновлялся StatusLine после DrawLine в редакторе
  31.05.2001 OT
    ! Исправления в SaveFile() Вместо цифр - поименованные константы типа SAVEFILE_XXX
  25.05.2001 IS
    - При вставке поточного блока из буфера обмена первый символ вставлялся в
      неверной кодировке. Это мой глюк, сорри :)
  24.05.2001 IS
    ! Опять правка последствий 592 (shift-home/end)
  19.05.2001 IS
    - Решение проблемы непрошеной конвертации табуляции (которая должна быть
      добавлена в начало строки при автоотступе) в пробелы при вставке
      чего-либо из буфера обмена.
  16.05.2001 DJ
    ! proof-of-concept
  15.05.2001 OT
    ! NWZ -> NFZ
  07.05.2001 SVS
    ! SysLog(); -> _D(SysLog());
    ! Search теперь возвращает TRUE/FALSE
  07.05.2001 IS
    - Баги: по shift-f7 продолжалась замена, хотя должен был быть поиск
      В Paste устранил потенциальный баг с delete []
  06.05.2001 DJ
    ! перетрях #include
  05.05.2001 IS
    ! shift-home/end - приблизим поведение к тому, какое было до 592
  04.05.2001 OT
    + Неверно формировалось меню плагинов по F11 (NWZ)
      Изменился PluginSet::CommandsMenu()
  27.04.2001 SVS
    - Ctrl-Q: не выставлялся признак модификации
    - Ctrl-Q: не помещались данные в буфер отката
    - XLat: не помещались данные в буфер отката
  27.04.2001 VVM
    + Обработка KEY_MSWHEEL_XXXX
  25.04.2001 SVS
    + KEY_MEDIT_ISSELECTED, в ответ на которую Editor::ProcessKey возвращает
      TRUE - если есть помеченный блок или FALSE - блока нету.
  25.04.2001 IS
    + ctrl-shift-enter - вставить в строку полное имя редактируемого файла
  20.04.2001 IS
    ! _Значительное_ ускорение выделения строки при помощи shift-home или
      shift-end. Просьба сразу сообщать на малейшее отклонение от манеры
      аналогичного поведения до этого патча, я вроде поэкспериментировал, но
      мог что-нибудь и упустить.
  11.04.2001 SVS
    + Добавлена обработка Ctrl-Q - при вставки символа не удалялся блок
      (постоянные блоки выключены)
  10.04.2001 SVS
    - Если файл RO и мы отказались его открывать - все равно плагину
      посылался эвент, что мол файл закрыт! И это при том, что плагин не
      получал эвен про удачное чтение - галиматья, блин :-((((
    ! Избавляемся от варнингов.
    - ^P/^M - некорректно работали: уловие для CurPos должно быть ">=",
      а не "меньше".
    - Забыли Pasting выставить :-( - для Shift-Ins из-за чего тот же колорер
      неверно отрабатывал.
  03.04.2001 IS
    + Обработка ESPT_AUTOINDENT, ESPT_CURSORBEYONDEOL, ESPT_CHARCODEBASE
      (это в ECTL_SETPARAM)
  28.03.2001 SVS
    + дополнительный параметр для SaveFile() - SaveAs
  28.03.2001 VVM
    ! При переходе на строку сдвигалась позиция на символ вправо.
  26.03.2001 SVS
    + При вызове списка плагинов говорим манагеру о том, чтобы он искал
      предопределенный топик "Editor" для Shift-F1 из списка плагинов
  20.03.2001 SVS
    + При выводе сообщения о размере файла сообщается его размер и
      минимально допустимый размер редактирования.
  15.03.2001 OT
    - Если нажать в редакторе <Enter> в конце файла, а потом сделать UNDO...
  12.03.2001 SVS
    ! Коррекция в связи с изменениями в классе int64
  27.02.2001 SVS
    + В статусной строке показываем код символа в зависимости от базы -
      Oct, Dec или Hex
  27.02.2001 IS
    + Проверка нового размера табуляции на допустимые значения в SetTabSize
  26.02.2001 IS
    ! Часть самостоятельных переменных заменено соответствующими из
      EditorOptions. Надо было это сразу сделать, да я что-то стормозил :)
    + SetCursorBeyondEOL
  21.02.2001 IS
    ! Opt.TabSize -> Opt.EdOpt.TabSize
      Opt.EditorPersistentBlocks -> Opt.EdOpt.PersistentBlocks
      Opt.EditorDelRemovesBlocks -> Opt.EdOpt.DelRemovesBlocks
      Opt.EditorExpandTabs -> Opt.EdOpt.ExpandTabs
      Opt.EditorAutoIndent -> Opt.EdOpt.AutoIndent
      Opt.EditorAutoDetectTable -> Opt.EdOpt.AutoDetectTable
      Opt.EditorCursorBeyondEOL -> Opt.EdOpt.CursorBeyondEOL
      Opt.EditorBSLikeDel -> Opt.EdOpt.BSLikeDel
  19.02.2001 IS
    - Забыл проинициализировать AttrStr
  16.02.2001 IS
    + Обработка ECTL_SETPARAM, пока только ESPT_TABSIZE и ESPT_EXPANDTABS
  15.02.2001 IS
    ! Opt.EditorDelRemovesBlocks -> DelRemovesBlocks
      Opt.EditorPersistentBlocks -> PersistentBlocks
    + SetDelRemovesBlocks, SetPersistentBlocks
  15.02.2001 IS
    + Обновим размер табуляции для всех Edit в функции SetTabSize
    ! Opt.EditorExpandTabs -> ConvertTabs
    + SetConvertTabs
    ! SetTabSize вызывается везде перед SetConvertTabs
  14.02.2001 IS
    + Размер табуляции хранится в TabSize, манипулировать им можно при помощи
      GetTabSize, SetTabSize
  14.02.2000 SVS
    ! Динамический размер под количество строк
  14.02.2001 VVM
    + При отсутствии блока AltU/AltI сдвигают текущую строчку
  13.02.2001 IS
    ! Строчка с атрибутами подготавливается при их считывании, а не при каждом
      обновлении экрана. Т.с., оптимизация кода после себя самого ;)
  12.02.2001 IS
    ! Атрибуты считываются только в двух местах, а не при каждом обновлении
      статуса
  08.02.2001 skv
    - EEREDRAW при Ctrl-P, Ctrl-M
  03.02.2001 skv
    - EEREDRAW_ALL теперь соответствует действительности,
      при переходе с одной строки на другую при выключенном
      cursor beyond end of line нажатием вправо.
  21.01.2001 SVS
    ! Диалоги поиска/замены выведен из Editor::Search в отдельную
      функцию GetSearchReplaceString (файл stddlg.cpp)
  14.01.2001 tran
    - убран баг, когда при вызове редактора из плагина
      показывался мусор
  07.01.2001 IS
    - не правильно работала проверка на ошибку при открытии файлов,
      превышающих определенный размер (не всегда срабатывала)
  28.12.2000 VVM
    + Щелчок мышью снимает непостоянный блок всегда.
  23.12.2000 OT
    - Медленно делался CtrlShiftLeft и CtrlAltLeft на ооооочеееень
      длинных словах
  22.12.2000 SVS
    - Вызов из EE_READ команды ECTL_SETKEYBAR приводил к падению ФАРа, т.к.
      объект EditKeyBar еще не существует.
  21.12.2000 SVS
    - В предыдущем исправлении было задано неверное условие для
      правила EditorF7Rules
  16.12.2000 OT
    - CtrlY на последней строке с выделенным вертикальным блоком не снимал
      выделение
  15.12.2000 SVS
    ! Уточнение по поводу того, что вернула GetFileAttributes()
  10.12.2000 IS
    ! Обрабатываем при Xlat только то слово, на котором стоит курсор, или то
      слово, что находится левее позиции курсора на 1 символ
  08.12.2000 SLV
    - Ctrl-Del в начале строки при выделенном блоке и
      включенном Opt.EditorDelRemovesBlocks.
  03.12.2000 IS
    + Показывать в статусной строке буквами RSH соответствующие атрибуты файла,
      если они установлены.
  03.12.2000 SVS
    + "Если файл имеет атрибут ReadOnly..." здесь System и Hidden - задаются
      отдельно.
  29.11.2000 SVS
    + Если файл имеет атрибут ReadOnly или System или Hidden,
      то сразу лочим файл - естественно отключаемо.
    + Opt.EditorFileSizeLimit - минимально допустимый размер файла, после
      которого будет выдан диалог о целесообразности открытия подобного
      файла на редактирование
  28.11.2000 SVS
    + Opt.EditorF7Rules - Правило на счет поиска в редакторе
      "О, это не ощибка - это свойство моей программы" :-)
      Новое поведение стало подконтрольным.
  25.11.2000 IS
    + Если нет выделения, то обработаем текущее слово. Слово определяется на
      основе специальной группы разделителей.
  04.11.2000 SVS
    + Проверка на альтернативную клавишу при XLat-перекодировке
  03.11.2000 OT
    ! Введение проверки возвращаемого значения
  02.11.2000 OT
    ! Введение проверки на длину буфера, отведенного под имя файла.
  23.10.2000 tran 1.40
    ! ВБ, табуляция и CurBeyondEOL
  16.10.2000 tran 1.39
    ! первый поиск идет с текущей позиции, а следующий - со следующей (FGWL#10)
  11.10.2000 SVS
    ! Bs удаляет блок так же, как и Del
    - "Редактировали, залочили, при выходе - потеряли файл :-("
  01.10.2000 IS
    ! Показывать букву диска в статусной строке
  24.09.2000 SVS
    + Работа по сохранению/восстановлению позиций в файле по RCtrl+<N>
    + Перекодировка Xlat
  20.09.2000 SVS
    - Bugs с "наездом" заголовка (от плагина) на всё прочеЯ!
  20.09.2000 SVS
    ! В Replace диалоге для строки replace удален флаг DIF_USELASTHISTORY
    ! Если при замене жмакнули All, то при повторном Shift-F7 снова
      появляется диалог о подтверждении действий.
  13.09.2000 skv
    ! EE_REDRAW вызывается с константами. 1 и 2 поменяны.
  07.09.2000 skv
    + ECTL_PROCESSKEY
  07.09.2000 skv
    - пофиксан быстрый replace при установленной перекодировке
  30.08.2000 tran 1.21
    - bug в автоотступе, внесенный патчем 66
  15.08.2000 skv
    ! Оптимизация Replace.
  10.08.2000 skv
    ! Оптимизация работы EE_REDRAW события редактора.
  07.08.2000 SVS
    + ECTL_SETKEYBAR - Функция установки Keybar Labels
  03.08.2000 KM 1.17
    ! В функцию Search добавлена возможность поиска целых слов.
  03.08.2000 SVS 1.16
    ! WordDiv -> Opt.WordDiv
  01.08.2000 tran 1.15
    + DIF_USELASTHISTORY в диалогах поиска,замены и перехода
  25.07.2000 tran 1.14
    - Bug 22 (остатки)
      подправлены обработки alt-left,alt-right
      на предмет перебега за границу блока
  21.07.2000 tran 1.13
    - Bug 22
      вот теперь это верно решение.
      предыдущие просба считать неверным.
      оно все равно переделано
      ввел три новых метода
        int  GetLineCurPos(); - просто сокращает писанину
        void BeginVBlockMarking(); - начинает вертикальный блок
        void AdjustVBlock(int PrevX); - подравнивает вертикальный блок
                при перебросках курсора при переходе через
                пустое место табуляций
      просьба оставить закоментаренный SysLog
      если что-то в этой части случится, я быстрее разберусь
      если нет - потом сам уберу...
  21.07.2000 tran
    ! Все внутри функции GoToPosition();
  18.07.2000 tran
    - Bug #22
      встань в начало текста, нажми alt-right, alt-pagedown,
      выделится блок шириной в 1 колонку, нажми еще alt-right
      выделение сбросится
  17.07.2000 tran
    - баг с автоотступом при [ ] Expand tabs to spaces
      и когда ентер жался сразу после символа '\t'
      ранее в новую строку вставлялись пробелы (надо \t)
      и символ табуляции на предыдущей строке стирался
      теперь он не стирается и на новой вместо пробелов
      все копируется из старой
      новые {} кое-где, побочный эффект вставки печати отладки,
      пусть их лежат... :)
  17.07.2000 OT
    + Застолбить место под разработку "моего" редактора
  14.07.2000 tran
    + переход на проценты
      вводим 50%, попадаем прямо в середину
      функция GetRowCol стала методом класса
  13.07.2000 SVS
    ! Некоторые коррекции при использовании new/delete/realloc
  11.07.2000 tran
    + строка статуса рисуется с учетом ширины консоли.
  11.07.2000 SVS
    ! Изменения для возможности компиляции под BC & VC
  07.07.2000 SVS
    + Разграничитель слов WordDiv находится теперь в global.cpp и
      берется из реестра (общий для редактирования)
  07.07.2000 tran & SVS
    + in AltF8 - row,col support
  29.06.2000 IG
    + CtrlAltLeft, CtrlAltRight для вертикальный блоков
  28.06.2000 tran
    - trap при размере вертикального блока более 1000 колонок
  25.06.2000 SVS
    ! Подготовка Master Copy
    ! Выделение в качестве самостоятельного модуля
*/
