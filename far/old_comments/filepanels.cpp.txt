/*
Modify:
  24.07.2005 WARP
    ! see 02033.LockUnlock.txt
  24.04.2005 AY
    ! GCC
  22.03.2005 SVS
    - мля, поспешил с PrepareOptFolder()
  22.03.2005 SVS
    ! в PrepareOptFolder() проэкспандим значение из реестра.
  28.02.2005 SVS
    - BugZ#1281 - Курсор на левой панели, обе отображены.
                  Жмём CtrlF2 CtrlO CtrlF2 CtrlF2 CtrlO.
                  Курсор на правой панели, а отображена левая.
      Не был учтен вариант, когда активная панель скрыта :-)
  11.11.2004 SVS
    + Обработка MCODE_V_ITEMCOUNT и MCODE_V_CURPOS
  06.08.2004 SKV
    ! see 01825.MSVCRT.txt
  07.07.2004 SVS
    + Macro II
    - Bug: делаем Ctrl-Q Tab Ctrl-5 (или любой другой режим) - ФАР упал, т.к.
      в FilePanels::ChangePanelViewMode после вызова ChangePanelToFilled
      Current панель совсем не так, что была (была QView, она уничтожилась,
      стала обычная файловая)
  03.06.2004 SVS
    ! Часть кода вынесена в отдельные функции:
       a) Установить фокус на противоположную панель (Tab)
          FilePanels::SetAnhoterPanelFocus()
       b) поменять панели местами (Ctrl-U)
          FilePanels::SwapPanels()
       c) сменить режим панели
          FilePanels::ChangePanelViewMode()
  24.05.2004 SVS
    - BugZ#1085 - сбос цифровой сортировки на панели
  20.05.2004 SVS
    ! NumericSort - свойство конкретной панели, а не режима отображения
  06.05.2004 SVS
    - BugZ#1069 - cosmetic bug: прорисовка меню невто время.
  20.10.2003 SVS
    + Обработка KEY_MACRO_SELECTED, KEY_MACRO_EOF и KEY_MACRO_BOF
  12.09.2003 SVS
    - BugZ#952 - не восстанавливаются сохраненные дириктории на панелях.
      В FilePanels::Init() каталоги Opt.LeftFolder и Opt.RightFolder
      инициализировались только если включена опция автосохранения.
  02.09.2003 SVS
    ! Изменения в PrepareOptFolder:
      1. уберем "задний" слеш (иначе не будет ".." для некорневого каталога)
      2. Воспользуемся функцией CheckShortcutFolder для нахождения
      ближайшего пути.
  27.08.2003 SVS
    - BugZ#934 - ФАР не хочет запускаться, если в системе недоступен...
      (ПОПЫТКА!)
  18.11.2002 SVS
    - BugZ#705 - Восстановление ширины панелей при Alt-F9
  07.10.2002 SVS
    - BugZ#674 - far.exe c:\dir [c:\dir2] - не работает
  17.09.2002 SKV
    - GoToFile на плагиновой панели.
  24.05.2002 SVS
    + Дублирование Numpad-клавиш
  29.04.2002 SVS
    ! Орисовка. Задолбала. Уморила. Думаю этот костыль поможет.
  13.04.2002 KM
    ! ??? Я не понял зачем Redraw в OnChangeFocus, если
      Redraw вызывается следом во Frame::OnChangeFocus и там
      благополучно перерисовывает панели.
  08.04.2002 IS
    + При смене диска по Alt-(F1|F2) установим принудительно текущий каталог
      на активной панели, т.к. система не знает ничего о том, что у Фара две
      панели, и текущим для системы после смены диска может быть каталог и на
      пассивной панели.
    ! Параметр у GoToFile - const
  26.03.2002 VVM
      GoToFile() - Если пассивная панель - плагиновая, то не прыгаем на нее
  22.03.2002 SVS
    - strcpy - Fuck!
  19.03.2002 OT
    - Исправление #96
  15.02.2002 SVS
    ! Вызов ShowProcessList() вынесен в манагер
  14.02.2002 VVM
    ! UpdateIfChanged принимает не булевый Force, а варианты из UIC_*
  16.01.2002 OT
    Испраление поведения макросов в инфо-, квик- и три-панелей
  02.01.2002 IS
    - Баг: забыли в GetTypeAndName про то, что бывают INFO_PANEL
  31.12.2002 VVM
    ! GoToFile() портила передаваемое ей имя.
  28.12.2001 DJ
    + единый метод GoToFile()
  24.12.2001 SVS
    - BugZ#198 - Ctrl-Up/Down при непустой командной строке
      Временная отмена KEY_CTRLUP и KEY_CTRLDOWN (передача в CmdLine)
  24.12.2001 VVM
    + GetTypeAndName возвращает имя файла на панелях TREE, QVIEW, FILE
  11.12.2001 SVS
    ! Заставим корректно отображаться кейбар в зависимости от типа панели.
  06.12.2001 SVS
    - при понашенных панелях не забыть бы выставить корректно каталог в CmdLine
  27.11.2001 DJ
    - мелочевка
  19.11.2001 OT
    Исправление поведения режима фуллскриновых панелей. 115 и 116 баги
  19.11.2001 VVM
    ! ActivePanel надо инициализировать до использования. А иначе...
  13.11.2001 OT
    ! Попытка исправить создание каталогов на пассивной панели по F7
  24.10.2001 SVS
    ! вместо "левая-правая" применим понятие "активная-пассивная" - так будет
      правильнее для ситуации "каталог создан не на той панели"
    ! KEY_CTRLUP и KEY_CTRLDOWN так же передадим в CmdLine (для будущего
      скроллирования юзвер-скрина)
  07.09.2001 VVM
    ! При возврате из CTRL+Q, CTRL+L восстановим каталог, если активная панель - дерево.
  13.08.2001 OT
    - исправление бага с появлением пропавших панелей при старте.
  31.07.2001 SKV
    ! Frame::OnChangeFocus(1)->OnChangeFocus(1)
  18.07.2001 OT
    VFMenu
  12.07.2001 OT
    - Не инициализировались панель Tree Info, QView
  11.07.2001 OT
    ! Перенос CtrlAltShift в Manager
  10.07.2001 SKV
    + keybar
  22.06.2001 SKV
    + update панелей при получении фокуса
  20.06.2001 tran
    - bug с отрисовкой при копировании
      смотреть в OnChangeFocus
  14.06.2001 OT
    ! "Бунт" ;-)
  03.06.2001 IS
    + ChangePanel: "Наследуем" состояние режима "Помеченные файлы вперед"
  31.05.2001 SVS
    ! Сносим лейбак по Alt-F6 для не NT
  30.05.2001 OT
    ! Перенос AltF9 в Manager::ProcessKey()
  21.05.2001 OT
    - Исправление поведения AltF9
  16.05.2001 DJ
    ! proof-of-concept
  16.05.2001 SVS
    ! _D() -> _OT()
  15.05.2001 OT
    ! NWZ -> NFZ
  11.05.2001 OT
    ! Отрисовка Background
  07.05.2001 SVS
    ! SysLog(); -> _D(SysLog());
  07.05.2001 DJ
   - чтоб кейбар обновлялся
  06.05.2001 DJ
   ! перетрях #include
  06.05.2001 ОТ
   ! Переименование Window в Frame :)
  05.05.2001 DJ
   + перетрях NWZ
  09.01.2001 tran
     Created
*/
