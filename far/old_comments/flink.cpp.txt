/*
Modify:
  24.07.2006 SVS
    - Mantis#224 - В масдае SUBST...
  07.07.2006 IS
    ! косметика в коде
  05.07.2006 IS
    - warnings
  06.05.2005 SVS
    ! У GetSubstName() предпоследний параметр может быть равен NULL
  24.04.2005 AY
    ! GCC
  04.11.2004 SVS
    ! избавимся от варнинга под VC
  06.08.2004 SKV
    ! see 01825.MSVCRT.txt
  08.06.2004 SVS
    ! Вместо GetDriveType теперь вызываем FAR_GetDriveType().
    ! Вместо "DriveType==DRIVE_CDROM" вызываем IsDriveTypeCDROM()
  01.03.2004 SVS
    ! Обертки FAR_OemTo* и FAR_CharTo* вокруг одноименных WinAPI-функций
      (задел на будущее + править впоследствии только 1 файл)
  25.02.2004 SVS
    + Новые сведения про _REPARSE_DATA_BUFFER ;-) (from DDK)
    - BugZ#581 - Неверно показывается свободное место
  10.10.2003 SVS
    - BugZ#970 - Сообщение об ошибке при создании хардлинка
  14.06.2003 IS
    ! CheckParseJunction -> IsLocalDrive (по смыслу содержимого функции)
      Функция проверяет - является ли диск локальным,
      возвращает 0 для нелокальных дисков.
      Если нет буквы диска, то диск считаем нелокальным.
      Функции неважно, полный ей путь передан или относительный.
    ! GetJunctionPointInfo, FarGetReparsePointInfo - для нелокальных
      дисков возвращает ошибку
  06.03.2003 SVS
    + _LOGCOPYR() - детальный лог процесса копирования
    ! наработки по вопросу о символических связях
  26.01.2003 IS
    ! FAR_DeleteFile вместо DeleteFile, FAR_RemoveDirectory вместо
      RemoveDirectory, просьба и впредь их использовать для удаления
      соответственно файлов и каталогов.
    ! FAR_CreateFile - обертка для CreateFile, просьба использовать именно
      ее вместо CreateFile
  12.07.2002 SVS
    ! Применяем CreateHardLink только для случая DRIVE_FIXED
      В остальных случаях - по старинке. ;-)
  13.06.2002 SVS
    - Если делать симлинк из-под SUBST-диска - траблы с именем
      (забыл в прошлый раз выставить разделитель '\')
  06.06.2002 VVM
    ! В функции GetPathRoot учтем UNC пути.
  31.05.2002 SVS
    - Бага при создании симлинка с subst-диска (проверим и поправим)
    + SetLastError в нужных местах
  30.05.2002 SVS
    - Ошибка создания симлинка ("Атака клоунов") - добавим обновление панелей
  25.04.2002 SVS
    - BugZ#466 - Ошибка создания симлинка (продолжение эпопеи)
  18.04.2002 SVS
    - BugZ#466 - Ошибка создания симлинка
      Так же, если не удавалось создать символическую связь... оставался
      созданный пустой каталог. Теперь этот каталог удаляется.
  22.03.2002 SVS
    - strcpy - Fuck!
  20.03.2002 SVS
    ! GetCurrentDirectory -> FarGetCurDir
  12.03.2002 SVS
    - Неверная работа GetPathRootOne в плане получения рута для пути типа "1\"
  14.12.2001 IS
    ! stricmp -> LocalStricmp
  17.10.2001 SVS
    ! Внедрение const
  16.10.2001 SVS
    + EnumNTFSStreams() - получить информацию о потоках
    ! У функции CanCreateHardLinks второй параметр можно не указывать (это
      позволяет проверять "а не NTFS ли ЭТО?"
    ! немного const-модификаторов
  01.10.2001 SVS
    ! FarGetRepasePointInfo -> FarGetRepa_R_sePointInfo
  27.09.2001 IS
    ! FarGetRepasePointInfo: выделяем столько памяти, сколько нужно
    - FarGetRepasePointInfo: использовали размер указателя, а не размер буфера
    - Левый размер при использовании strncpy
  26.09.2001 SVS
    ! В FarGetRepasePointInfo буфер выделется динамически (alloca)
  24.09.2001 SVS
    + FarGetRepasePointInfo - для FSF.
    ! уточнение для GetPathRoot(), если в качестве параметра передали
      полное наименование репасепоинта.
  11.09.2001 SVS
    ! для "Volume{" в функции GetPathRootOne() начнем просмотр с диска "A:"
  25.06.2001 IS
    ! Внедрение const
  01.06.2001 SVS
    + Добавки для вывода лога.
  30.05.2001 SVS
    + FarMkLink()
    ! Удалена за ненадобностью проверка на CREATE_JUNCTION (полностью)
  25.05.2001 SVS
    ! Удалена за ненадобностью проверка на CREATE_JUNCTION (осталась только
      для mount volume point
  22.05.2001 tran
    ! по результам прогона на CodeGuard
  06.05.2001 DJ
    ! перетрях #include
  28.04.2001 VVM
    ! GetSubstName() получает тип носителя
    + Обработка Opt.SubstNameRule
  25.04.2001 SVS
    + CreateVolumeMountPoint() - монтирование диска на файловую систему
  06.04.2001 SVS
    - В Win2K в корень папки "Program Files" не создавался HardLink (Alt-F6)
      Значит применяем "родную", готовую к употреблению функцию CreateHardLink()
    + CanCreateHardLinks() - проверка на вшивость.
  02.04.2001 SVS
    ! Уточнения для GetPathRoot[One]()
  14.03.2001 OT
    - В vc++ уже есть определение _REPARSE_GUID_DATA_BUFFER
  14.03.2001 SVS
    + Зарезервирован кусок кода для создания SymLink для каталогов
      в функции CreateJunctionPoint
  13.03.2001 SVS
    ! Добавлен необходимый код в функцию DeleteJunctionPoint()
  13.03.2001 SVS
    ! GetPathRoot переехала из strmix.cpp :-)
    + В функцию GetPathRoot добавлена обработка mounted volume
  01.02.2001 SKV
    - MAXPATH или _MAX_PATH вот в чём вопрос.
  26.01.2001 SVS
    - Бага в NT при удалении SUBST-дисков. В NT ЭТО должно выглядеть как
      '\??\K:\Foo'
  25.01.2001 SVS
    ! Функции GetSubstName и DelSubstDrive теперь нормально работают и для
      Windows98
  05.01.2001 SVS
    + Функция GetSubstName - переехала из mix.cpp
    + Функция DelSubstDrive - удаление Subst драйвера
  05.01.2000 OT
    - Косметика, из-за которой не компилился под VC :)
  04.01.2001 SVS
    + Заглушки для CreateJunctionPoint, DeleteJunctionPoint
    + GetJunctionPointInfo - получить инфу про Junc
  03.01.2001 SVS
    ! Выделение в качестве самостоятельного модуля
    + GetNumberOfLinks и MkLink переехали из mix.cpp
*/
