/*
Modify:
  20.09.2006 SVS
    + Manager::SwapTwoFrame()
  11.07.2006 EL
    - Убрал варнинги
  03.07.2006 SVS
    - CAS при пятом режиме панели... не гасит панель.
  23.05.2006 SVS
    - При ширине экрана поболее и имени файла > 128 - в окне Screen видны ошметки в конце строки + иногда ФАР вываливается
  31.03.2006 SVS
    - после переноса функционала CAS из filepanels.cpp сюда перестало работать правило TechInfo#8
  23.01.2006 SVS
    ! Добавлен второй параметр у SendKeyToPlugin, признак того, что ЭТО
      клавиша Pred и нужно выставить у VirtualKey (передаваемого в плагин)
      флаг PKF_PREPROCESS.
  25.10.2005 SVS
    ! Часть I. Разрешим плагинам "ВСЕ" кеи (кроме макрокодов) - для ProcessKey()
    ! параметр у ProcessKey не int, а DWORD
  24.07.2005 WARP
    ! see 02033.LockUnlock.txt
  24.04.2005 AY
    ! GCC
  22.03.2005 SVS
    - откат предыдущего изменения, не туда копал :-(
  22.03.2005 SVS
    - BugZ#1303 - Падение, вроде как из за DM_CLOSE в DN_INITDIALOG
  02.02.2005 SVS
    ! ShowBackground() теперь возвращает TRUE/FALSE
  11.11.2004 SVS
    + Manager::GetTopModal() - возвращает top-модал или сам фрейм, если у фрейма нету модалов
  04.06.2004 SVS
    ! Щёб KEY_APPS|KEY_CTRL|KEY_ALT не какал в regmon при каждом нажатии клавиш... изменим условие
  17.05.2004 SVS
    ! Для cl.exe (тот, что Microsoft позиционирует как freeware, version
      13.10.3052) сделаем уточнение для Test_EXCEPTION_STACK_OVERFLOW.
      Щёб не матерился.
  18.12.2003 SVS
    ! Пробуем различать левый и правый CAS (попытка #1).
  13.10.2003 SVS
    ! RunGraber() вызываем в манагере, а в CalcKeyCode() просто вернем KEY_INS|KEY_ALT
  27.05.2003 SVS
    ! Зачатки каптюризации мыши :-)
      Введен ScreenObject *ScreenObject::CaptureMouseObject, который
      указывает на объект, захвативший мышь.
  08.04.2003 SVS
    - Висюн ФАРа, если в плагиновом StartupInfo до старта манагера вызывается что-то активное
  21.01.2003 SVS
    + xf_malloc,xf_realloc,xf_free - обертки вокруг malloc,realloc,free
      Просьба блюсти порядок и прописывать именно xf_* вместо простых.
  10.01.2003 SVS
    + Для отработки процесса исключений самого ФАРа (эмуляция) в manager.cpp
      добавлен код, вызывающий менюху по Ctrl-Alt-Apps с последующим
      исполнением "плохого" кода. ЭТОТ будет только для "закрытых" альф
      (только для тестеров).
      Если кто знает как остальные баги проэмульгировать - добавляйте
  07.11.2002 SVS
    ! Не компиляция под Borland 5.5
  08.10.2002 SVS
    - BugZ#675 - Неправильно вычисляется ширина меню со списком окон
  26.09.2002 SVS
    + Вынесем код по ресайзу в функцию ResizeAllFrame()
  20.06.2002 SVS
    ! Для хелпа и диалога по F12 не кажим список скринов.
  18.06.2002 SVS
    + В манагер добавлена переменная StartManager, отвечающая на вопрос
      "Манагер уже стартовал?"
  24.05.2002 SVS
    + Обработка KEY_ALTINS (временно закомменчено, до выяснения обстоятельств)
  22.05.2002 SKV
    + удалён институт semimodal фрэймов, и всё что с ним связано.
    + У ExecuteNonModal своё цикл работы.
  14.05.2002 SKV
    - Куча багов связанных с переключениями между полумодальными
      редакторами и вьюерами.
  15.05.2002 SVS
    ! Сделаем виртуальный метод Frame::InitKeyBar и будем его вызывать
      для всех Frame в методе Manager::InitKeyBar.
  28.04.2002 KM
    - Баг с зацикливанием:
      F12 F1 F12 F1 F12 F1... и так далее из любого фрейма
      приводило к бякам с перерисовкой.
    - Bug#485
      ===
      Вызываем UserMenu: F2 Alt-F4 и попадаем в модальный редактор.

      Далее:
      1. Ctrl-O - видим User Screen
      2. CAS    - (no comment)

      ImmediateHide говорите. Хе!
      ===
  18.04.2002 SKV
    - фикс деактиватора.
  13.04.2002 KM
    - Устранён важный момент неперерисовки, когда один
      над другим находится несколько объектов VMenu. Пример:
      настройка цветов. Теперь AltF9 в диалоге настройки
      цветов корректно перерисовывает меню.
  07.04.2002 KM
    - Надо бы ещё и прорефрешить меню, находящееся над диалогом,
      иначе при активации ещё одного диалога поверх меню, с
      последующим его закрытием, меню перемещалось под первый
      диалог (точнее первый диалог рисовался поверх меню).
  04.04.2002 KM
    - Удавлен ещё один артефакт, приводящий к неперерисовке
      меню, вызванного из модального объекта. Проверялось так:
      до этого патча делаем AltF7, вызываем меню дисков (AltD),
      затем хелп (F1), затем AltF9, Esc - меню исчезло (!).
    - Устранено мелькание заголовка консоли при использовании
      CAS (Ctrl-Alt-Shift).
  30.03.2002 OT
    - После исправления бага №314 (патч 1250) отвалилось закрытие
      фара по кресту.
  27.03.2002 OT
    - Дыра в ДелитКоммит(). Не корректно удалялся фрейм, которого
      не было ни в модальном стеке, ни в списке немодальных фреймов.
      Проявлялось при попытке открыть залоченный файл из поиска файлов.
  22.03.2002 SVS
    - strcpy - Fuck!
    ! Уточнение для BugZ#386 - F12 вызывается всегда, но!
      Но для модального редактора (или вьювера из поиска)
      все пункты меню задисаблены.
  22.03.2002 SVS
    - BugZ#386 - Поиск файлов и редактор
  03.03.2002 SVS
    ! Если для VC вставить ключ /Gr, то видим кучу багов :-/
  15.02.2002 SVS
    ! Вызов ShowProcessList() вынесен в манагер
  29.01.2002 OT
    - падение фара в рефрешКоммит()
  08.01.2002 SVS
    - Бага с макросом, в котором есть Alt-F9 (смена режима)
  02.01.2002 IS
    ! Вывод правильной помощи по Shift-F1 в меню плагинов в редакторе/вьюере
    ! Если на панели QVIEW или INFO открыт файл, то считаем, что это
      полноценный вьюер и запускаем с соответствующим параметром плагины
  13.12.2001 OT
    ФАР виснет при закрытии по [X] при модальном фрейме. (Bug 175)
  15.11.2001 SVS
    - BugZ#66 - порча командной строки после двойного AltF9
      Добавив немного Sleep(1) избавляемся от бага...
  11.10.2001 IS
    + CountFramesWithName
  04.10.2001 OT
    Запуск немодального фрейма в модальном режиме
  21.09.2001 SVS
    ! расширим диалог
  18.09.2001 SVS
    ! Безхозный "_D(" заменен на "_OT(".
      2OT: Ты не против? А то для _ALGO этот макрос всю масть сбивает :-)
  31.08.2001 OT
    - Закрытие ExitAll() при far -e и изменении оного
  23.08.2001 OT
    - Исправление зависания фара по F10 из панелей с несохраненными файлами
      в редакторе. Криво была написана функция ExitAll()
  08.08.2001 OT
    - Исправление CtrlF10 в редакторе/вьюере
  28.07.2001 OT
    - Исправление зацикливания Reversi
  27.07.2001 SVS
    - При обновлении часиков учитывать тот факт, что они могут быть
      отключены (к тому же не в той функции вызов стоял)
    ! KEY_CTRLALTSHIFTPRESS уже не привелегированная
  26.07.2001 OT
    - Исправление far /e - AltF9
  26.07.2001 SVS
    ! VFMenu уничтожен как класс
  25.07.2001 SVS
    ! Принудительно вызовем ShowTime(1); в ActivateCommit() для того, чтобы
      редравить часы (ибо теперь они могут быть трех цветов :-)
  25.07.2001 SVS
    ! Во время назначения макроса не юзаем некотрое количество клавиш :-)
      Об этом нам говорит флаг IsProcessAssignMacroKey
  24.07.2001 OT
    - Исправление отрисовки CAS при 2-х и более модальных диалогах
  24.07.2001 SVS
    ! Заюзаем флаг NotUseCAS - чтобы не гасилось ничего для одиночного
      редатора/вьювера (far /e)
  23.07.2001 SVS
    ! Закомментим пока WaitInFastFind - они здесь как бы не нужны.
  19.07.2001 OT
    + Добавились новые члены и методв типа UnmodalizeХХХ
  18.07.2001 OT
    ! VFMenu
  11.07.2001 OT
    ! Перенос CtrlAltShift в Manager
  07.07.2001 IS
    + При выборе фреймов (F12), если фреймов больше 10, то используем для
      горячих клавиш буквы латинского алфавита, т.о. получаем всего не 10,
      а 36 горячих клавиш.
  29.06.2001 OT
    - Зацикливание при UpdateCommit()
  26.06.2001 SKV
    + PluginCommit(); вызов ACTL_COMMIT
  23.06.2001 OT
    - Решение проблемы "старика Мюллера"
    - некие проблемы при far -r. FramePos теперь инициализируется значение -1.
  14.06.2001 OT
    ! "Бунт" ;-)
  06.06.2001 OT
    - Исправлены баги приводившие к утечкам памяти в ситуации: AltF7->Enter->F3->F6->F6->:((
    - Перемудрил зачем-то с ExecuteFrame()...
  04.06.2001 OT
     Подпорка для "естественного" обновления экрана
  30.05.2001 OT
    - Баг типа memory leak после F6 в редакторе/вьюере. Исправлена функция UpdateCommit()
    - Приведение CloseAll() и ExitAll() к канонами NFZ.
    - Исправление ActivateCommit(). При некоторых обстоятельствах
      бестолку "проглатывался" ActivatedFrame.
    + AltF9 работет теперь не только в панелях, но и ... везде :)
  28.05.2001 OT
    - Исправление "Файл после F3 остается залоченным" (переписан DeleteCommit())
  26.05.2001 OT
    - Исправление ExucuteModal()
    + Новые методы ExecuteComit(), ExecuteFrame(), IndexOfStack()
    + Новый член Frame *ExecutedFrame;
    ! Исправление функций DeleteCommit(), UpdateCommit(), связанных с появлением ExecuteFrame
    ! Исправление поведения RefreshCommit() с учетом блокировок.
  25.05.2001 DJ
    - Исправлен трап при закрытии Alt-F7.
  23.05.2001 OT
    - Исправление бага - удаление Frame, не внесенного в список FrameList
  22.05.2001 OT
    + Добавился RefreshedFrame
  22.05.2001 DJ
    ! в ExecuteModal() прежде всего делаем явный commit (если остались
      подвисшие операции, возможны разные глюки)
  21.05.2001 DJ
    ! чистка внутренностей; в связи с появлением нового типа фреймов
      выкинуто GetFrameTypesCount(); не посылалось OnChangeFocus(0)
  21.05.2001 SVS
    ! struct MenuData|MenuItem
      Поля Selected, Checked, Separator и Disabled преобразованы в DWORD Flags
    ! Константы MENU_ - в морг
  16.05.2001 DJ
    ! возвращение ExecuteModal()
  15.05.2001 OT
    ! NWZ -> NFZ
  14.05.2001 OT
    - Борьба с F4 -> ReloadAgain
  12.05.2001 DJ
    ! Убран ModalFrame.Show() в Manager::ExecuteModal()
  12.05.2001 DJ
    ! FrameManager оторван от CtrlObject
    ! объединены ExecuteModal() и ExecuteModalPtr() (и о чем я думал, когда
      делал две функции?)
    ! ReplaceCurrentFrame() заменена на более универсальную ReplaceFrame()
      (с подачи ОТ)
  11.05.2001 OT
    ! Отрисовка Background
  10.05.2001 DJ
    + SwitchToPanels()
    * GetFrameTypesCount() не учитывает фрейм, который мы собрались удалять
    + ModalStack
    - всякие перетряхи логики DestroyFrame() и иже с ними
  07.05.2001 SVS
    ! SysLog(); -> _D(SysLog());
  07.05.2001 DJ
    ! приведены в порядок CloseAll() и ExitAll()
  06.05.2001 DJ
    ! перетрях #include
    + ReplaceCurrentFrame()
  07.05.2001 ОТ
    - Баг с порядком индекса текущего фрейма FramePos при удалении
      какого-нибудь из списка :)
  06.05.2001 ОТ
    ! Переименование Window в Frame :)
  05.05.2001 DJ
    + перетрях NWZ
  04.05.2001 OT
    + Неверно формировалось меню плагинов по F11 (NWZ)
      Изменился PluginSet::CommandsMenu()
  29.04.2001 ОТ
    + Внедрение NWZ от Третьякова
  29.12.2000 IS
    + Метод ExitAll - аналог CloseAll, но разрешает продолжение полноценной
      работы в фаре, если пользователь продолжил редактировать файл.
      Возвращает TRUE, если все закрыли и можно выходить из фара.
  28.07.2000 tran 1.04
    + косметика при выводе списка окон -
      измененные файлы в редакторе маркируются "*"
  13.07.2000 SVS
    ! Некоторые коррекции при использовании new/delete/realloc
  11.07.2000 SVS
    ! Изменения для возможности компиляции под BC & VC
  28.06.2000 tran
    - NT Console resize
      add class member ActiveModal
  25.06.2000 SVS
    ! Подготовка Master Copy
    ! Выделение в качестве самостоятельного модуля
*/
