/*
Modify:
  01.09.2006 SVS
    ! В результатах поиска отобразим атрибуты в том же виде, что и при выводе на панели (по аналогии с flshow.cpp)
  11.07.2006 EL
    - Убрал варнинги
  05.07.2006 IS
    - warnings
  22.03.2006 AY
    - Хекс поиск файлов не переводил найденные файлы в темп панель.
  21.01.2006 AY
    ! Поиск в Юникоде при поиске по всем таблицам пропускал куски от файла.
    ! Поиск по всем таблицам мог работать совершенно неправильно если файл был
      определён как Reverse BOM Юникод.
  11.09.2005 KM
    - Bug #1377 - при отсутствии кодовых таблиц не работал поиск по
      "All character tables": не находил текст в кодировке "Windows text"
  22.07.2005 SVS
    + Искать по PATH
  13.07.2005 SVS
    ! Изменен класс NamesList. Теперь он управляет двумя именами.
  04.07.2005 WARP
    - В диалоге поиска не полностью выводится опция ( ) From the root folder
  28.06.2005 WARP
    - Проблемы с открытием по F3/F4 результата поиска в архиве во вложенной папке.
  21.06.2005 SVS
    ! Пере вызовом вьювера проверим "кривизну" APIS2 и отдадим либо ShortName либо Name
    ! NameList перед вызовом вьювера заполним как ShortName либо Name
  05.05.2005 WARP
    - Несколько перестарались с проверкой элементов при поиске. Не работал ProcList.
  24.04.2005 AY
    ! GCC
  24.04.2005 KM
    ! Переделан диалог поиска. Теперь задание поиска в первых байтых (Кб,Мб или Гб)
      вынесено в отдельный диалог настройки дополнительных параметров поиска.
  18.04.2005 WARP
    ! Перед вызовом GetFiles, получаем информацию с панели (GetFindData) и находим
      файл с таким же FindData (кроме ftLastAccessTime). Для него и вызываем GetFiles.
  12.04.2005 KM
    + Добавлена давно ожидаемая возможность задания размера для ограничения
      поиска в первых байтах (килобайтах, мегабайтах или гигабайтах) в файлах
    + GetSearchInFirst - получение размера ограничения в зависимости
      от выбранного типа размера
  26.02.2005 WARP
    - Исправления в поиске в архивах
  06.02.2005 WARP
    - Глюки со строкой результатов поиска
  29.01.2005 SVS
    - под BC & VC6.0 нет определения INVALID_FILE_ATTRIBUTES в h-файлах. Добавил.
  23.01.2005 SVS
    - Поиск не мог перейти на pagefile.sys
  23.01.2005 SVS
    ! Продолжаем клеить поиск (см. 01916.search.txt)
  11.12.2004 WARP
    - Накосячил с обработкой ESC/F10 в поиске.
  09.12.2004 WARP
    ! Обертка из TRY/EXCEPT с посылом в fexcept в потоке поиска файлов (в потоке отрисовки уже есть обработчик).
  09.12.2004 WARP
    ! Устраняем падения поиска при попытке открывать файл,
      когда список файлов решил поменять размер.
    ! Чистим findfile.cpp (см. 01867.Search2.txt).
  08.12.2004 WARP
    ! Патч для поиска #1. Подробнее 01864.FindFile.txt
  01.12.2004 WARP
    - Устраняем глюки с показом окна поиска прямо поверх редактора (сам сотворил).
    ! Убираем лишнее перемергивание листа по окончании поиска (убираем DM_ENABLEREDRAW)
  19.11.2004 WARP
    ! "Нормальная" реализация UpdateRequired для VMenu,
      более интеллектальное обновление листа в поске.
  09.11.2004 WARP
    - Неверное позиционирование в архиве после просмотра файла во время поиска
  25.10.2004 SVS
    ! В процессе поиска: нажатие F3 не тормозит процесс, Enter (при активной кнопки [ View ]) - тормозит.
  06.08.2004 SKV
    ! see 01825.MSVCRT.txt
  14.06.2004 KM
    ! Уточним действие поиска при использовании фильтра, в котором
      теперь существует обработка атрибута FILE_ATTRIBUTE_DIRECTORY
  08.06.2004 SVS
    ! Вместо GetDriveType теперь вызываем FAR_GetDriveType().
    ! Вместо "DriveType==DRIVE_CDROM" вызываем IsDriveTypeCDROM()
  02.03.2004 SVS
    - BugZ#1040 - неправильное форматирование сообщения
    + небольшая оптимизация коад - общий кусок вынесен в отдельный процедур.
  19.11.2003 IS
    ! теперь NamesList не требует указания размера списка
  26.10.2003 KM
    ! Если используем 16-ричный поиск, то поиск также должен искать
      0 байты: "00 00 00"
  23.10.2003 SVS
    ! вернем обратно вайлы и слипы
  16.10.2003 SVS
    ! Opt.FileSearchMode и Opt.FindFolders вынесены в отдельную структуру struct FindFileOptions
    + FindFileOptions.CollectFiles - собирать NamesList для поисковика (когда жмем F3 в диалоге результатов поиска)
    ! цикл со счетчиком и Sleep(10) убраны в пользу критических секций
  15.10.2003 KM
    - Обработаем переключение "горячих" клавиш
  10.10.2003 SVS
    - Из-за неверного условия в поисковике
       было:  else if (Param1>=19 || Param1<=24)
      не работал кусок кода, отвечающий за переключение строки ввода из одного состояния в другое
      (DI_EDIT <-> DI_FIXEDIT)
  09.10.2003 SVS
    ! В диалоге результатов поиска вместо "FindFile" заюзаем новый раздел помощи "FindFileResult"
  05.10.2003 KM
    ! Размер в результатах поиска выводится с учётом 64-битной математики.
    + В результатах поиска выводятся атрибуты найденных папок и файлов.
    + Чекбокс [ ] Use filter, включающий возможность фильтрования
      операции поиска при помощи использования нового класса FileFilter.
    + Кнопка Filter, позволяющая настраивать фильтр операций.
    ! При включенном фильтре операций тип даты и времени найденных файлов
      выводится в зависимости от установленных в фильтре:
      модификации, создания или последнего доступа.
    + Если используется фильтр операций, то во время поиска сообщаем об этом
  24.09.2003 KM
    - Маленькие правки на предыдущий патч.
  22.09.2003 KM
    + Добавлен поиск 16-ричного кода.
  20.09.2003 KM
    + Добавим в список стандартных таблиц поиска ANSI таблицу,
    а то как-то некузяво получается в редакторе и вьювере она
    есть, а в поиске нет.
  18.09.2003 KM
    ! Запоминание установок символьных таблиц
  12.09.2003 SVS
    ! Немного увеличим буфер для GetPathRootOne
  20.06.2003 SVS
    ! _beginthread(WriteDialogData... перемещен после запуска нитей-сборщиков
    ! Костыль:
      DM_SETFOCUS на 6 элемент производится после прихода эвента DN_DRAWDIALOGDONE
      т.о. мы избавляемся от двойного фокуса, т.к. DM_SETFOCUS будет идти в main-нити
    ! Применим класс ClevMutex (щёб голова не болела о том, что "забыл или не забыл поставть ReleaseMutex()")
  13.06.2003 SVS
    + В диалог поиска файлов добавлена опция "Искать в символических связях"
      ("Search in symbolic links"). Позволяет искать файлы в символических
      связях наравне с обычными подкаталогами. По умолчанию (при запуске
      Фара) ее значение равно значению опции Opt.ScanJunction.
  14.05.2003 SVS
    + _ALGO()
  21.04.2003 SVS
    ! Не "return FALSE;", но "DefDlgProc"
  07.04.2003 VVM
    ! Если во время поиска выбрать найденный файл мышью - вешаемся.
      Не надо посылать сообщение на закрытие диалога. Оно ни к чему...
  15.03.2003 VVM
    - Если диалог вызывается в цикле, то и DI_COMBOBOX надо инитить в цикле.
  20.02.2003 SVS
    ! Заменим strcmp(FooBar,"..") на TestParentFolderName(FooBar)
  04.02.2003 VVM
    ! Подкорректировал работу с мютексом для диалога.
  26.01.2003 IS
    ! FAR_DeleteFile вместо DeleteFile, FAR_RemoveDirectory вместо
      RemoveDirectory, просьба и впредь их использовать для удаления
      соответственно файлов и каталогов.
    ! FAR_CreateFile - обертка для CreateFile, просьба использовать именно
      ее вместо CreateFile
  21.01.2003 SVS
    + xf_malloc,xf_realloc,xf_free - обертки вокруг malloc,realloc,free
      Просьба блюсти порядок и прописывать именно xf_* вместо простых.
  19.01.2003 KM
    - Падение в поиске на панели плагина YaCat с включенной
      опцией "Искать в архивах".
    - Неправильный переход на файл в панели плагина YaCat.
  03.12.2002 SVS
    - BugZ#680 - Несанкционированное запоминание настроек поиска
  28.10.2002 SVS
    ! При юзании PrepareTable*() параметр UseTableName=TRUE.
      Этим избавляемся от BugZ#689
  14.10.2002 VVM
    ! После использования плагин будем закрывать. (bug # 590)
  03.10.2002 SVS
    - перелудил в прошлом патче (PluginMode уже объявлена)
  01.10.2002 SVS
    - BugZ#665 - Новая кнопка [Drive]
  01.10.2002 SVS
    - BugZ#664 - лишние "&" в именах кодировок в диалоге поиска
  01.10.2002 VVM
    ! Переместим фокус на кнопку [Go To] при первом добавлении в список,
      а не при прорисовке.
  30.09.2002 SVS
    ! упростим процедуру обработки DN_CTLCOLORDLGLIST - нужно заменить только
      9-й индекс!
  12.09.2002 SVS
    - BugZ#593 - Падает при попытке поиска из меню
  31.08.2002 KM
    ! При поиске в плагине опции поиска "Search in all non-removable drives"
      и "Search in all, except removable and network drives" не
      имеют смысла и поэтому задизаблены.
  14.08.2002 VVM
    ! Уберем возможность переключения в активный редактор из окна поиска.
      Манагер это не умеет...
  28.06.2002 VVM
    + При начале поиска фокус находится на кнопке [New search]
      Как только что-нибудь найдем - сменим его на [Go To], если небыло
      движения по диалогу.
  02.06.2002 KM
    - Уточнение поиска по целым словам. Переработка алгоритма.
  27.05.2002 VVM
    - Большая бага - при поиске по словам выход за границы массива.
  25.05.2002 IS
    ! первый параметр у ConvertDate теперь ссылка на константу
  24.05.2002 SVS
    + Дублирование Numpad-клавиш
  18.05.2002 SVS
    ! Возможность компиляции под BC 5.5
  16.05.2002 SVS
    ! Нужно вместо GetPathRoot в поисковике юзать GetPathRootOne
  15.05.2002 SKV
    + зафиксируем вход в модальный редактор
  06.05.2002 SVS
    ! Перед показом диалога проинициализируем диалог путем вызова InitDialog()
  25.04.2002 IS
    ! внедрение const
  13.04.2002 KM
    ! Предыдущй патч не работал. Баг№445 был изничтожен ещё
      в 1347 патче.
  09.04.2002 SVS
    - BugZ#445 - Перетаскивание диалога поиска порождает мусор
  07.04.2002 KM
    - Вроде должен исчезнуть нестабильный баг с однократным
      отображением "||||" вместо строки "Искать в корня диска".
    - Неперерисовка подложки диалога поиска при выборе
      нового диска.
    - Сломался переход на каталог из списка найденных файлов
      во время починки попадания лишних каталогов во временную
      панель.
  05.04.2002 SVS
    ! MAX_READ -> Opt.PluginMaxReadData
  04.04.2002 KM
    - При смене диска на плагиновый и обратно не обновлялось
      состояние чекбокса "Искать в архивах".
  02.04.2002 KM
    + По просьбам трудящихся добавлен поиск по локальным дискам.
    + Давно хотел: в диалоге поиска при поиске с корня диска
      возможность смены драйва.
  26.03.2002 DJ
    ! ScanTree::GetNextName() принимает размер буфера для имени файла
  24.03.2002 KM
    - Неверно выкидывались во временную панель список файлов
      с папками. При поиске по маске, в которую каталоги не
      попадали, во временную панель попадали папки, в которых
      эти файлы были найдены, но отнюдь не найденные по маске,
      что не есть правильно.
    ! Восстановил поведение поиска в отношении добавления найденных
      каталогов в список к стандарту 1.65 и 3 беты. А речь идёт
      вот о чём. В старом фаре, если при поиске по маске в неё
      попадали и каталоги то они попадали в список найденного
      аналогично файлам:
      ===
      г======================== Find file =========================¬
      ¦C:\Work\FAR_SRC\Far\new\Debug\Plugins\                      ¦
      ¦  p_1.bat                                 0  24.03.02 04:31 ¦
      ¦  p1                                 Folder  24.03.02 04:31 ¦
      ¦  ProcList                           Folder  17.01.02 21:35 ¦
      ===
      При глобальной переделке поиска я это случайно убил.
    ! Сортировку в плагинах по именам папок делаем в случае,
      если имя файла содержит в себе путь, а не только при
      OPIF_REALNAMES, в противном случае в результатах поиска
      получается некрасивый визуальный эффект разбросанности
      одинаковых папок по списку.

  21.03.2002 VVM
    + Передаем имена каталогов на панель без заключительного "\"
  15.01.2002 VVM
    ! Неправильно передавались имена архивов в панель
  15.03.2002 KM
    - Заголовок окна показывался без амперсанда, но с подсветкой
      если в имени искомого файла был амперсанд.
  12.02.2002 VVM
    + Задействуем функцию AbortMessage()
  04.03.2002 DJ
    ! нажатие Esc в диалоге подтверждения прерывания поиска поиск _не_
    прерывает
  01.03.2002 SVS
    ! Есть только одна функция создания временного файла - FarMkTempEx
  21.02.2002 VVM
    ! заменим strcpy на strncpy. А то падает при поиске в слишком
      длинных путях.
    ! Отмена патча про ESC.
  21.02.2002 VVM
    ! При запросе на остановку поиска ESC аналогичен ответу NO
  19.02.2002 VVM
    ! Ошибка поиска в плагине. Забыл скобки поставить...
  11.02.2002 SVS
    ! Проинициализируем новые FarListItem в 0 (поелезно при изменении
      размера структуры FarListItem)
  30.01.2002 VVM
    ! Большой фикс - используем hPluginMutex во время работы с панелью
      плагина. Иначе возможен облом при просмотре найденного файла в
      момент поиска на панели этого-же плагина.
  23.01.2002 VVM
    + GetPluginFile() - получить файл для просмотра с панели плагина.
      В отличие от предыдущего подхода - учитывает вложенность папок
      и делает для них SetDirectory()
  18.01.2002 VVM
    ! При вызове просмотра забыли создать временный каталог.
  17.01.2002 VVM
    ! Выделять элементы в списке будем через ListBox, а не в структуре.
      Убираем возможность двойного выделения
    ! Поскольку работу с поиском в папках вынесли в диалог -
      флаг OPIF_FINDFOLDERS в плагине потерял свою актуальность
  16.01.2002 VVM
    ! В функцию AddMenuRecord не передается параметр Path, он там лишний...
      исправление бага № 236
  15.01.2002 VVM
    ! Исправление поиска в подкаталогах архивов
    + Информация о количестве найденных файлов и каталогов разделена.
  28.12.2001 SVS
    ! Правка с учетом изменений структур (про анонимный union)
  18.12.2001 KM
    - > IS "p.s. заметил на 1127 билде: если искать какую-нибудь (длинную?)
      строку, то при повторном поиске (выбрать "Новый поиск" в диалоге
      поиска) строка поиска будет содержать эту строчку, но усеченную
      по ширине.  Например, я искал "FROM_LEFT_2ND_BUTTON_PRESSED", после
      выбора "Новый поиск" получил "...PRESSED".... Кстати, и ищется
      файлах в обоих случаях не "FROM_LEFT_2ND_BUTTON_PRESSED", а
      "...PRESSED" (где-то ты там оригинальную строку поиска портишь)"
  16.12.2001 KM
    - Наконец-то удавлен баг с торможением клавиш курсора во время
      поиска в архивах. Дело оказалось в моей прошлогодней правке
      при поиске в запароленном архиве - IsPluginGetsFile, но так как
      поиск был переделан на Dialog API, то сей флаг теперь стал мешать.
    + Добавлена информативность в "Searching in:". Если ищем текст в файлах,
      то строка выглядит "Searching "text_to_find" in:".
    + Сделана проверка на существование открытого файла в редакторе при
      нажатии F4 во время поиска, при этом выдаётся запрос как в панелях
      (усечённый запрос).
      Артефакт: при нажатии на F4 во время поиска на файле уже открытом в
      редакторе заголовок консоли продолжает изменяться как-будто открыт
      диалог поиска (устал уже просто работать, может завтра найду :).
  11.12.2001 VVM
    - bugz#162 (* вызвав плагин для поиска в архиве и ничего там не найдя, FAR забыл,
         что поиск продолжается всё в том же каталоге и ещё раз вписал имя
         каталога в список результатов поиска. *)
  11.12.2001 VVM
    - Не рисуем диалог при активном скрин-сэйвере
  03.12.2001 DJ
    - корректный показ имен файлов с амперсандами
  01.12.2001 KM
    - [Bug#145] М-да... Такая невнимательность до добра не доведёт :(
      Перепутать Param1 с Param2 это надо суметь...
    + Добавлена в заголовок окна поиска информация о маске поиска:
      "=== Find files: mask*.ext ==="
      Сам много раз на длинных поисках забывал что ищу...
  23.11.2001 KM
    - БЛИН! Правил глюк и глюк добавил :-(
      Перестали работать чекбоксы и радиобатоны.
  23.11.2001 VVM
    ! Немного изменений, что-бы отрисовка диалога не перекрывала сообщение.
  22.11.2001 KM
    - Забыли однако, что DN_BTNCLICK работает со всеми "нажимающимися"
      контролами, только с кнопками немного по-другому, поэтому простое
      нажатие ENTER на кнопках Find или Cancel ни к чему не приводило.
    + Во время поиска нажали Esc - выдаётся стандартный запрос на останов
      операции (если опция включена) или просто поиск останавливается
      (раньше он ещё и выходил из него).
  22.11.2001 VVM
    ! Сбрасыватьсостояние FindFolders при вводе текста.
      Но только если не меняли этот состояние вручную
      Переделка предыдущего патча.
  15.11.2001 IS
    - ищем каталоги только, когда поле "текст" пустое, иначе ерунда получается
    + диалог поиска: не дадим включить поиск папок, если ищем текст
  13.11.2001 VVM
    ! Хм. Добавим папки на панель, если их искали...
  26.10.2001 KM
    + Добавлена опция "Искать каталоги", позволяющая искать не только файлы, но и каталоги.
    - Была попытка просматривать каталоги из архивов по F3.
  20.10.2001 KM
    ! Подчистки по тексту.
    ! Зачем-то при выбросе файлов во временную панель был сделан переход на файл,
      на котором стоял курсор в списке. Убрано.
  19.10.2001 KM
    - Маленький глючок в моём прошлом патче, перепутал параметры местами у memset.
    ! Использование DIF_SEPARATOR2 вмечто MakeSeparator.
    ! Обработка кнопки [ New search ] сделана через enum VVM для однообразности.
  19.10.2001 VVM
    + Вынесли GoTo за пределы диалоговой процедуры.Причины все те же, что и у [ Panel ]
    ! FindFileArcIndex нельзя использовать при обработке выделенных элементов списка.
      Он может быть и другой.
  19.10.2001 VVM
    ! Попытка номер 2. С учетом замечаний и пожеланий от KM и SVS ;)))
    ! Перетрях поиска, зачистка местности, удавливание багов. Далее по тексту...
  19.10.2001 KM
    ! С подачи VVM сделано добавление в список индекса LIST_INDEX_NONE на пустых строках.
    - Поправлен поиск во временной панели, он там не работал и выдавал "странные результаты",
      не позволял просматривать и редактировать файлы, хотя они и OPIF_REALNAMES.
    + Добавлена SortItems для сортировки PluginPanelItem для поиска во временной панели.
  18.10.2001 KM
    - Фар падал при попытке нажатия на кнопку "View", когда ничего не было найдено.
    ! Некоторые уточнения поведения кнопок и мыши при пустом списке.
  15.10.2001 VVM
    ! Отмена предыдущего патча про хост-файл. Факт отсутсвия хост-файла должен
      учитываться по-другому.
  15.10.2001 KM
    - Фар валился при попытке поиска в плагинах типа Temporary panel
      и Network browser. Не учитывался факт отсутствия хостфайла в этих
      плагинах.
    - Не происходил переход на файл при клике на нём мышой в списке.
    - Забыл обработать KEY_NUMPAD5 в списке найденных файлов.
  13.10.2001 VVM
    ! Баг при поиске в темп-панели.
    + Новая функция - очистить списки. Что-бы небыло перерасхода памяти
      после нажатия на [New search]
  12.10.2001 VVM
    ! Устраняем падение при поиске строки. Забыл, что
      INVALID_HANDLE_VALEU <> 0 ;)
  12.10.2001 VVM
    ! Очередной перетрях поиска. Избавляемся от глобальных переменных,
      которые могут конфликтовать. Список архивов теперь хранит хэндл
      архива и флаги для этого архива.
  09.10.2001 VVM
    ! Переделка поиска - ускорение неимеверное :))))
  07.10.2001 SVS
    ! Нафига юзать пвсевдографигу напрямую? ведь договаривались же -
      только коды!
  07.10.2001 SVS
    ! Небольшое ограничение области действия Dialog
  01.10.2001 VVM
    ! Проверять нада переменные на NULL
  01.10.2001 VVM
    ! После Alt-F7 с поиском в архивах не работали меню и диалоги плагинов
  27.09.2001 IS
    - Левый размер при использовании strncpy
  24.09.2001 OT
    Падение при открытии файла (F3,F4) из поиска
  13.09.2001 KM
    - Не просматривались файлы, найденные в архиве, если поиск начинался
      не с корня архива, а из подкаталогов.
  23.08.2001 VVM
    + В диалоге поиска строка с каталогом расширена на 20 символов - все равно пустовали.
    + Вызвать TruncPathStr() для каталога...
  17.08.2001 KM
    ! При редактировании найденного файла из архива функция "Сохранить"
      заменяется на функцию "Сохранить в", вызывая диалог для ввода имени.
    + Добавлена кнопка "View" в диалог поиска при поиске файла изнутри архива.
    - Поправлена реакция на клавиши серый + и - в просмотре файлов, теперь
      в списке просмотра присутствуют только не архивные файлы.
  15.08.2001 KM
    ! Глобальный перетрях поиска. 5-я серия
    + Добавлены возможности при поиске в архивах:
      1) Просматривать файлы найденные в архиве и находящиеся
         в списке по F3 и F4;
      2) Скидывать список архивов, в которых находятся найденные
         файлы во временную панель.
      3) Производить поиск в архивах не панели плагина, к примеру на
         временной панели, если панель создавалась с флагом OPIF_REALNAMES.
  11.08.2001 KM
    ! Вроде бы удалось нормально синхронизировать нити
      и теперь вся информация о ходе поиска выводится
      корректно.
  10.08.2001 KM
    + Изменение размеров диалога поиска при изменении размеров консоли.
  08.08.2001 KM
    ! Глобальный перетрях поиска. 3-я серия
    ! Кажется удалось избавится ещё от одного потенциально (и не только)
      падучего места при закрытии диалога поиска во время оного: просто
      я забыл перед закрытием диалога дождаться окончания работы второй нити.
    ! Переделан (пока без таблицы ANSI) выбор таблиц поиска.
  07.08.2001 IS
    ! Изменились параметры у FarCharTable
  07.08.2001 SVS
    ! удален FindSaveScr - нафиг, к теропевту. И без него жизнь полна прекрас.
    ! если идет режим поиска (все еще ищем), то отключим вывод помощи,
      ибо... артефакты с прорисовкой. Вот когда закончится поиск, тогде хелп
      будет доступен.
    ! запрещаем во время поиска юзать некоторые манагерные клавиши кроме
      KEY_CTRLALTSHIFTPRESS и KEY_ALTF9
      (2KM: про Alt-F9 - здесь нужно следить DN_RESIZECONSOLE)
    ! во время вызова редактора/вьювера разрешаем юзать клавиши:
      Alt-F9 и F11 :-)
    - ну и напоследок... используя "подвал" :-) корректно восстановим
      экран после F3/F4:
  01.08.2001 KM
    ! Глобальный перетрях поиска. 2-я серия
    ! С подачи OT синхронизацию процессов
      перевёл на Mutex.
    - Кажется удалось избавиться от иксепшенов.
      Артефакты:
        1. Если после F3 или F4 во время поиска
           нажать CAS, то под спрятавшимся
           вьювером/редактором будет видна тень
           от диалога.
        2. После F3 и F4 не восстанавливается
           изображение под диалогом.
        3. Не всегда рисуется количество и место
           поиска.
  31.07.2001 KM
    ! Глобальный перетрях поиска. 1-я серия
      Артефакты:
        1. После F3 и F4 не восстанавливается
           изображение под диалогом.
        2. При выходе из диалога поиска иногда
           выскакивает farexcpt.0xc0000005.
        3. Не всегда корректно синхронизируются нити,
           из-за чего не рисуется количество и место
           поиска.
  27.07.2001 SVS
    ! Опечатка (по наводке IS)
  24.07.2001 IS
    ! Замена проверки на ' ' и '\t' на вызов isspace
    ! Замена проверки на '\n' и '\r' на вызов iseol
  02.07.2001 IS
    ! FileMaskForFindFile.Set(NULL) -> FileMaskForFindFile.Free()
    + Вернул автоматическое добавление '*' к концу маски при определенных
      условиях (это было отменено предыдущим патчем).
  01.07.2001
    + Можно использовать маски исключения при установлении параметров поиска.
  25.06.2001 IS
    ! Внедрение const
  25.06.2001 SVS
    ! Юзаем SEARCHSTRINGBUFSIZE
  23.06.2001 OT
    - косметические исправления, чтобы VC не "предупреждал" :)
  18.06.2001 SVS
    - исправляем последствия предыдущего патча :-)
  18.06.2001 SVS
    - "Невхождение" в архивы - неверное условие на равенство (в 706-м забыл
      этот момент исправить)
  10.06.2001 IS
    + Покажем текущее имя кодовой таблицы в диалоге параметров поиска в файлах.
  09.06.2001 IS
    ! При переходе к найденному не меняем каталог, если мы уже в нем находимся.
      Тем самым добиваемся того, что выделение с элементов панели не
      сбрасывается.
  05.06.2001 SVS
    + Обработчик диалога (без него нажатие на пимпу "[View]" заваливает ФАР)
  04.06.2001 OT
     Подпорка для "естественного" обновления экрана
  03.06.2001 SVS
    ! Изменения в связи с переделкой UserData в VMenu
  30.05.2001 OT
    ! Процессор грузится на 100% после всех найденных файлов, возврат к старому :(... до лучших времен
  26.05.2001 OT
    ! Починка AltF7 в NFZ
  25.05.2001 DJ
    - ставим правильный цвет для disabled строчек
  21.05.2001 SVS
    ! struct MenuData|MenuItem
      Поля Selected, Checked, Separator и Disabled преобразованы в DWORD Flags
    ! Константы MENU_ - в морг
  16.05.2001 DJ
    ! proof-of-concept
  15.05.2001 OT
    ! NWZ -> NFZ
  14.05.2001 DJ
    * дизейблим, а не прячем Search in archives на плагиновой панели
    * колесо чтоб работало :-)
  12.05.2001 DJ
    * курсор не останавливается на пустых строках между каталогами
  10.05.2001 DJ
    + поддержка F6 во вьюере/редакторе, вызванных из Find files
  06.05.2001 DJ
    ! перетрях #include
  05.05.2001 DJ
    + перетрях NWZ
  29.04.2001 ОТ
    + Внедрение NWZ от Третьякова
  30.03.2001 SVS
    ! GetLogicalDrives заменен на FarGetLogicalDrives() в связи с началом
      компании по поддержке виндовой "полиции".
  28.02.2001 IS
    ! "CtrlObject->CmdLine." -> "CtrlObject->CmdLine->"
  27.02.2001 VVM
    ! Символы, зависимые от кодовой страницы
      /[\x01-\x08\x0B-\x0C\x0E-\x1F\xB0-\xDF\xF8-\xFF]/
      переведены в коды.
  11.02.2001 SVS
    ! Несколько уточнений кода в связи с изменениями в структуре MenuItem
  14.12.2000 OT
    -  баг: поиск по Alt-F7 с очень длинной маской поиска/текста
  11.11.2000 SVS
    ! FarMkTemp() - убираем (как всегда - то ставим, то тут же убираем :-(((
  11.11.2000 SVS
    ! Используем конструкцию FarMkTemp()
  21.10.2000 SVS
    ! Добавка для поиска в FFFE-файлах.
  10.09.2000 SVS
    - Запрещаем двигать диалог результатов поиска!
  07.08.2000 KM
    - Глюк в поиске при запароленном архиве, если после получения
      запроса на ввод пароля понажимать долго стрелки вверх или вниз
      или пошевелить мышкой, диалог запроса пароля исчезал.
  05.08.2000 KM
    - Перерисовка каталога поиска в Alt-F7, если пользователь во время
      поиска нажимает стрелки вправо или влево.
  03.08.2000 KM
    + Добавлена возможность поиска по "Целым словам"
  01.08.2000 tran 1.03
    + |DIF_USELASTHISTORY
  13.07.2000 SVS
    ! Некоторые коррекции при использовании new/delete/realloc
  11.07.2000 SVS
    ! Изменения для возможности компиляции под BC & VC
  25.06.2000 SVS
    ! Подготовка Master Copy
    ! Выделение в качестве самостоятельного модуля
*/