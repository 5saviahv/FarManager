/*
Modify:
  26.07.2006 SVS
    ! на FAT?? не ставим дату/время, если ЭТО каталог.
    ! считываем параметры даты/времени, только если значение изменилось.
  28.02.2006 SVS
    - Неверная работа...
      1) пометить "encrypted", пометить "process subfolders" - работает
      2) пометить "process subfolders", пометить "encrypted" - НЕ работает
  09.02.2006 AY
    - Атрибуты T и $ - только чтоб показывать, выставлять их нельзя.
    ! Баг с определением состояния чекбокса I при обработке нескольких файлов.
  07.12.2005 SVS
    ! небольшие недочеты от пред.патча :-)
  27.10.2005 SVS
    + Mantis#24 - FILE_ATTRIBUTE_NOT_CONTENT_INDEXED
    + Mantis#49 - В плагиновых панелях вызывать диалог установки аттрибутов в RO-режиме
  05.10.2005 SVS
    ! за каким то миллисекунды не обнулялись
  29.09.2005 SVS
    ! ScanTree должен уметь и короткие имена каталогов при рекурсивном спуске
  03.05.2005 AY
    - В ShellSetFileAttributes() на папках посылались в IsFileWritable() атрибуты верхней
      папки а не обрабатываемого файла (и ещё в одном месте).
    - IsFileWritable() пытался CreateFile() на папках в win9x.
  06.04.2005 AY
    ! В ShellSetFileAttributes() когда "[x] Process subfolders" IsFileWritable()
      вызывалась всегда для начальной папки вместо обрабатываемого файла, что и приводило
      к не работоспособности этого функционала.
  21.01.2005 SVS
    + GetVolumeInformation_Dump
  17.09.2004 SVS
    ! Хе, ну и назвал :-)) CheckWratableFile! Будет IsFileWritable
  16.09.2004 SVS
    - Если файл залочен, то попытка выставить атрибуты неправильная (см. описание патча)
    + функция CheckWratableFile, которая еще "на подступах" к выставлению атрибутов матерится
  06.08.2004 SKV
    ! see 01825.MSVCRT.txt
  12.09.2003 SVS
    ! Немного увеличим буфер для GetPathRootOne
  04.09.2003 SVS
    ! Вместо юзания CompareFileTime() применим трюк с сортировщиком файлов:
      приведем FILETIME к __int64
  06.05.2003 SVS
    - траблы с выставлением атрибутов C и E
  20.02.2003 SVS
    ! Заменим strcmp(FooBar,"..") на TestParentFolderName(FooBar)
  26.01.2003 IS
    ! FAR_CreateFile - обертка для CreateFile, просьба использовать именно
      ее вместо CreateFile
  12.07.2002 SVS
    ! SetAttr - для одиночного фолдера не меняем те поля, которые изменили!
      Но! Если клинкнули на оригинал, то делаем вид, будто ничего не менялось.
  12.06.2002 SVS
    - Бага: Skip был аналогичен кнопке Cancel
  25.05.2002 IS
    ! первый параметр у ConvertDate теперь ссылка на константу
  26.04.2002 SVS
    - BugZ#484 - Addons\Macros\Space.reg (про заголовки консоли)
  05.04.2002 SVS
    - BugZ#424 - Error change file attributes
  26.03.2002 DJ
    ! ScanTree::GetNextName() принимает размер буфера для имени файла
  22.03.2002 DJ
    ! зачем-то была переменная FullName, с которой не делалось ничего, кроме
      порчи стека
  30.01.2002 SVS
    ! Для симлинков не ставим дату-время, т.к. в этом случае меняется
      дата-время оригинала, а не линка.
  28.12.2001 SVS
    ! Если время не удалось выставить, то не пытаемся выставлять и атрибуты
  17.12.2001 SVS
    - Бага, аднака - для одиночного файлового объекта месаг процесса установки
      атрибутов был пустым.
    ! Часть кода по разбору даты и времени вынесена в функцию GetFileDateAndTime()
  08.11.2001 SVS
    ! Уточнение ширины - прагала падлюка.
  06.11.2001 SVS
    ! Ширина месага при удалении файлов и выставлении атрибутов динамически
      меняется в сторону увеличения (с подачи SF), начиная с min 30 символов.
  24.10.2001 SVS
    - Уберем флаг MSG_KEEPBACKGROUND для месага.
  23.10.2001 SVS
    - неверное выставлялись атрибуты для нескольких объектов
    ! немного уточнений по поводу вывода текущего обрабатываемого файла
    - Артефакт с прорисовкой после внедрения CALLBACK-функции (когда 1 панель
      погашена - остается кусок месагбокса)
  21.10.2001 SVS
    + CALLBACK-функция для избавления от BugZ#85
  12.10.2001 SVS
    ! Ну охренеть (Opt.FolderSetAttr165!!!) - уже и так есть то, что надо:
      Opt.SetAttrFolderRules!
    + кнопка "Original" - исходное значение файловых времен.
  11.10.2001 SVS
    + Opt.FolderSetAttr165; // поведение для каталогов как у 1.65
  27.09.2001 IS
    - Левый размер при использовании strncpy
  24.09.2001 SVS
    - В деревяхе Ctrl-A неверно отображало инфу для симлинков.
  11.09.2001 SVS
    + для "volume mount point" укажем что это именно монтированный том и по
      возможности (если имя диска есть) покажем букву диска. Для прочих
      символических связей оставим "Link"
  11.09.2001 SVS
    - BugZ#7: Уточнение по поводу слинкованной файловой системы отличной от NTFS.
  17.07.2001 SKV
    - баг в ReadFileTime. Псевдопотенциальный, в debug срабатывал всегда.
    ! закомментировал несколько неюзаемых переменных, сократив кол-во варнингов
  25.06.2001 IS
    ! Внедрение const
  10.06.2001 SVS
    - ошибка в логике при работе с атрибутами для каталога
  20.05.2001 SVS
    - воздействие на кнопки "текущее" и "пусто" приводило к закрытию дислога
    + реакция на клик мыши на лейбах Modification, Creation и Last access
      перемещает фокус ввода на ближайшее поле ввода.
  18.05.2001 SVS
    ! Вся логика работы диалога перенесена на уровень диалогой процедуры.
      Осталось и инициализирующую часть впихнуть по назначению ;-)
  14.05.2001 SVS
    - Проблемы с выставлением времени файла
    + DOUBLE_CLICK: ;-)
      1) на лейбаках: Modification, Creation & Last access
         выставляет текущую дату для всей строки (дата и время)
      2) в отдельных едитах - только в них.
    ! Логика выставления времени перенесена на уровень функции-обработчика
      диалога
  07.05.2001 SVS
    ! SysLog(); -> _D(SysLog());
  06.05.2001 DJ
    ! перетрях #include
  29.04.2001 ОТ
    + Внедрение NWZ от Третьякова
  12.04.2001 SVS
    ! Для FILE_ATTRIBUTE_REPARSE_POINT всегда показываем "Link to:",
      но, если данные не доступны - так и говорим - "НЕТУ!"
  09.04.2001 SVS
    - нужно было использовать локальные копии для параметров SrcDate и SrcTime
      в функции ReadFileTime
    ! немного оптимизации в функции ReadFileTime
  08.04.2001 SVS
    ! Полная независимость выставления значений для даты и времени.
    - Исправлен баг с "неустановкой" даты для одиночного файла.
  08.04.2001 IS
    - не работало изменение атрибутов после ?557
  04.04.2001 VVM
    + Кнопка [ Blank ] в диалоге. Очистить поля даты/времени.
  03.04.2001 SVS
    ! FillFileldDir -> FillingOfFields ;-)
  28.02.2001 SVS
    - Бага в Win2K с взаимоисключениями Сжатого и Шифрованного атрибута
    + Выставляем заголовок консоли во время процесса установки атрибутов
    + В месаге процесса установки отображаем текущЕЕ файлО.
  30.01.2001 SVS
    ! снимаем 3-state, если "есть все или нет ничего"
      за исключением случая, если есть Фолдер среди объектов
  23.01.2001 SVS
    + Немного оптимизации кода :-)
  22.01.2001 SVS
    ! ShellSetFileAttributes теперь возвращает результат в виде TRUE или FALSE
    + Если это плагиновая панель, то посмотрим на OPIF_REALNAMES
  22.01.2001 SVS
    + Больше интелектуальности диалогу установки атрибутов !!!! :-)))
      Теперь, для случая Multi, если есть подряд идущие атрибуты, то
      они изначально инициализируются как надо - либо [x] либо [ ] либо
      [*] для случая если "не все"
  14.01.2001 SVS
    + обработка случая, если ЭТО SymLink
  04.01.2001 SVS
    - Бага с одиночным файлом - переоптимизировал ;-(
  03.01.2001 SVS
    ! ускорим процесс за счет "необработки" подобных атрибут
    - бага с переходами между контролами
  03.01.2001 SVS
    ! новый имидж диалога атрибутов - один интелектуальный диалог на
      все случаи жизни :-)
  30.12.2000 SVS
    ! Функции для работы с файловыми атрибутами вынесены в fileattr.cpp
  21.12.2000 SVS
    ! Если папка одна, то включение "Process subfolders" не очищает
      область с атрибутами.
  14.12.2000 SVS
    ! Показываем недостающие атрибуты, но делаем их недоступными.
  24.11.2000 SVS
    + Правило на счет установки атрибутов на каталоги
  16.11.2000 SVS
    ! массивы для масок имеют постоянный адрес прописки - объявлены как static
  11.11.2000 SVS
    - "сложности" с криптованием :-))))
  02.11.2000 SVS
    - исправляем баги :-)
  20.10.2000 SVS
    + Новый атрибут Encripted (NTFS/Win2K)
  14.08.2000 KM
    ! Изменена инициализация диалога с учётом возможностей Mask.
  25.06.2000 SVS
    ! Подготовка Master Copy
    ! Выделение в качестве самостоятельного модуля
*/
