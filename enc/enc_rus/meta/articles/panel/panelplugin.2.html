<html>

<head>
<meta http-equiv="Content-Type" Content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../styles/styles.css">
<title>Шаг2: Файловая панель</title>
</head>

<body>

<div class=navbar>
<a href="../../index.html">главная</a> |
<a href="../index.html">статьи</a>
</div>

<a name="top"></a>
<h1>Шаг2: Файловая панель</h1>
<div class=navbar><a href="panelplugin.html">Введение</a> &#187; <a href="panelplugin.1.html">Шаг 1</a> &#187; Шаг 2 &#187; <a href="panelplugin.3.html">Шаг 3</a></div>
<div align=right>
</div>
<hr color="#003399">


<p>Добавляем к предыдущему варианту плагина собственную панель, эмулирующую файловую
систему. На данном шаге файловая панель функционирует в режиме Read Only (ни добавлять ни
удалять с панели мы еще не умеем). Ссылки на каталоги представлены в виде файлов. Каталоги на
панели - виртуальные папки для хранения ссылок на реальные каталоги. В корне виртуальной файловой
системы располагаются 2 объекта - папка и ссылка на каталог по умолчанию:

<ol>
<li><b>[Shell Folders]</b><br>
  Здесь &quot;файлы&quot; - пункты из ветви реестра
  HCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders</li>
<li><b>[FolderShortcuts]</b><br>
  Здесь &quot;файлы&quot; - пункты из ветви реестра
  HCU\Software\Far\FolderShortcuts</li>
<li>&lt;Default Dir&gt;</li>
</ol>

<p>При вызове плагина из меню дисков происходит переход в каталог по умолчанию. При вызове из
меню плагинов - эмулируемая файловая панель. Выбор каталога по умолчанию осуществляется клавишей F7.</p>

<p>Для создания полноценного плагина на данном этапе нам понадобятся 5 экспортируемых функций:

<table class="cont">
<tr class="cont"><th class="cont" width="20%">Функция</th><th class="cont" width="80%">Назначение</th></tr>
<tr class="cont"><td class="cont" width="20%"><a href="../../exported_functions/setstartupinfo.html">SetStartupInfo</a></td>
<td class="cont" width="80%">получить от FAR начальные значения, необходимые плагину</td></tr>
<tr class="cont"><td class="cont" width="20%"><a href="../../exported_functions/getplugininfo.html">GetPluginInfo</a></td>
<td class="cont" width="80%">передать в FAR информацию о плагине</td></tr>
<tr class="cont"><td class="cont" width="20%"><a href="../../exported_functions/configure.html">Configure</a></td>
<td class="cont" width="80%">настройки плагина: показывать ли плагин в меню выбора дисков и задание каталога по умолчанию.</td></tr>
<tr class="cont"><td class="cont" width="20%"><a href="../../exported_functions/openplugin.html">OpenPlugin</a></td>
<td class="cont" width="80%">пользователь вызвал плагин</td></tr>
<tr class="cont"><td class="cont" width="20%"><a href="../../exported_functions/getfinddata.html">GetFindData</a></td>
<td class="cont" width="80%">передача в FAR списка объектов на панели</td></tr>
<tr class="cont"><td class="cont" width="20%"><a href="../../exported_functions/freefinddata.html">FreeFindData</a></td>
<td class="cont" width="80%">вызывается для освобождения памяти, вызывается после GetFindData</td></tr>
<tr class="cont"><td class="cont" width="20%"><a href="../../exported_functions/setdirectory.html">SetDirectory</a></td>
<td class="cont" width="80%">позиционирование на нужном каталоге</td></tr>
<tr class="cont"><td class="cont" width="20%"><a href="../../exported_functions/closeplugin.html">ClosePlugin</a></td>
<td class="cont" width="80%">"осторожно, плагин закрывается" </td></tr>
<tr class="cont"><td class="cont" width="20%"><a href="../../exported_functions/getopenplugininfo.html">GetOpenPluginInfo</a></td>
<td class="cont" width="80%">"расскажем ФАРу о своих достижениях" - параметры панели и все такое</td></tr>
</table>


<pre>
.
.
.
</pre>


<p>На этом второй этап заканчиваем. Исходники для этого "урока" можно взять <a href="panelplugin.2/">здесь</a>.

<div align=right><code>
<br>
</code></div>
<div class=seecont><a href="#top">наверх</a></div>


</body>
</html>
