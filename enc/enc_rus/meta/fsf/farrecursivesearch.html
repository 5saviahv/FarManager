<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>FSF.FarRecursiveSearch</title>
<meta http-equiv="Content-Type" Content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<script language="javascript" src='../links.js' type="text/javascript"></script>
</head>
<!--history
-->
<body>

<h1>FarRecursiveSearch</h1>
<div class=navbar>
<a href="../index.html">главная</a> |
<a href="index.html">FarStandardFunctions</a>
</div>

<div class=shortdescr>
Функция <dfn>FSF.FarRecursiveSearch</dfn> осуществляет рекурсивный поиск файлов.
</div>

<pre class=syntax>
void WINAPI FarRecursiveSearch(
  const char *InitDir,
  const char *Mask,
  <a href="../defs/frsuserfunc.html">FRSUSERFUNC</a> UserFunc,
  DWORD Flags,
  void *Param
);
</pre>

<h3>Параметры</h3>
<div class=descr>
  <div class=dfn>InitDir</div>
  <div class=dfndescr>Указывает на каталог, откуда начинается поиск,
    например <code>"c:\far\plugins"</code></div>

  <div class=dfn>Mask</div>
  <div class=dfndescr>Указывает на маску файлов. Маска файла может быть
       стандартного <a href="../filemasks.html">ФАРовского вида</a>.</div>

  <div class=dfn>UserFunc</div>
  <div class=dfndescr>Указывает на функцию типа <a href="../defs/frsuserfunc.html">FRSUSERFUNC</a>,
    которая будет вызываться для каждого найденного файла. Функция должна вернуть
    <code>TRUE</code> для продолжения поиска файлов, или <code>FALSE</code> для
    окончания поиска.
  </div>

  <div class=dfn>Flags</div>
  <div class=dfndescr>Указывает на необходимое действие. Может быть следующим (перечисление <a name="FRSMODE">FRSMODE</a>):
<table class="cont">
<tr class="cont"><th class="cont" width="40%">Флаг</th><th class="cont" width="60%">Описание</th></tr>
  <tr class="cont"><td class="cont" width="40%"><a name="FRS_RETUPDIR">FRS_RETUPDIR</a></td>
  <td class="cont" width="60%">По окончании поиска параметр <dfn>FullName</dfn>
      функции <a href="../defs/frsuserfunc.html">UserFunc</a> будет содержать имя
      каталога, в котором обнаружен заданный файл.
    </td></tr>

  <tr class="cont"><td class="cont" width="40%"><a name="FRS_RECUR">FRS_RECUR</a></td>
  <td class="cont" width="60%">Поиск заданного файла в дереве каталогов.</td></tr>

  <tr class="cont"><td class="cont" width="40%"><a name="FRS_SCANSYMLINK">FRS_SCANSYMLINK</a></td>
  <td class="cont" width="60%">Позволяет искать файлы в символических связях наравне с обычными подкаталогами.<br>
  Если при помощи символических связей в файловой
     системе образованы рекурсивные кольца (например, символическая связь указывает
     на один из собственных родительских каталогов), поиск будет идти до достижения
     максимально допустимой длины полного пути файлов.
  </td></tr>
    </table>
   </div>
  <div class=dfn>Param</div>
  <div class=dfndescr>Указатель на данные пользователя,
    FAR его никак не обрабатывает, просто передает в <var>UserFunc</var>.</div>
</div>

<h3>Возвращаемое значение</h3>
<div class=descr>
См. описание параметра <dfn>Flags</dfn>
</div>

<h3>Замечания</h3>
<div class=descr>
<ol>
<li>Если хотите использовать данные, переданные функции <dfn>UserFunc</dfn> по
    окончании поиска, вы должны скопировать эти данные во внутренние переменные.
<li><u>Для FAR вплоть до 1.70 beta 3</u>: Для перечисления всех файлов задайте маску файла
    <var>Mask</var> равную "*".
<li><u>Для FAR вплоть до 1.70 beta 3</u>: При рекурсивном поиске каталоги, в которых
    производится поиск, тоже определяются на основании параметра <var>Mask</var>.
    Поэтому  в  большинстве случаев при рекурсивном поиске следует указывать
    маску "*" и в callback-функции при помощи функции
    <a href="../service_functions/cmpname.html">CmpName</a>
    определять, соответствует ли файл критериям поиска.
<li>Если флаг <dfn>FRS_SCANSYMLINK</dfn> не указан, то независимо от настроек FAR, символические связи обрабатываться не будут.

</ol>
</div>

</body>
</html>
