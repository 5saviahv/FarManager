<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>FarMenuItemEx</title>
<meta http-equiv="Content-Type" Content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
</head>
<body>

<h1>FarMenuItemEx</h1>
<div class=navbar>
<a href="../index.html">главная</a> |
<a  href="index.html">структуры</a> |
<a href="../service_functions/menu.html">Menu</a>
<br>
</div>

<div class=shortdescr>
Структура <dfn>FarMenuItemEx</dfn> описывает один пункт меню. Массив этих
структур передается в функцию <a href="../service_functions/menu.html">Menu</a>.
Для использования структуры <dfn>FarMenuItemEx</dfn> необходимо установить
флаг <a href="../service_functions/menu.html#FMENU_USEEXT">FMENU_USEEXT</a>
при вызове функции <dfn>Menu</dfn>.
</div>

<pre class=syntax>
struct FarMenuItemEx
{
  DWORD Flags;
  union {
    char  Text[128];
    const char *TextPtr;
  } Text;
  DWORD AccelKey;
  DWORD Reserved;
  DWORD_PTR UserData;
};
</pre>
<h3>Элементы</h3>
<div class=descr>
    <div class=dfn>Flags</div>
    <div class=dfndescr>Комбинация следующих значений (перечисление <a name="FARMENUFLAGS">FARMENUFLAGS</a>):
    <table class="cont">
      <tr class="cont"><th class="cont" width="40%">Флаг</th><th class="cont" width="60%">Описание</th></tr>
      <tr class="cont"><td class="cont" width="40%"><a name="MIF_SELECTED">MIF_SELECTED</a></td>
       <td class="cont" width="60%">Признак активности пункта меню. Только один
        пункт может быть активным.</td></tr>

      <tr class="cont"><td class="cont" width="40%"><a name="MIF_CHECKED">MIF_CHECKED</a></td>
       <td class="cont" width="60%">Признак отмеченного пункта меню. Перед
        текстом будет отображаться метка выбора.
        </td></tr>
      <tr class="cont"><td class="cont" width="40%"><a name="MIF_SEPARATOR">MIF_SEPARATOR</a></td>
       <td class="cont" width="60%">Пункт меню отображается как разделитель.
        В отличие от стурктуры <a href="farmenuitem.html">FarMenuItem</a>
        разделитель меню может содержать текст. Текст выравнивается по середине.</td></tr>

      <tr class="cont"><td class="cont" width="40%"><a name="MIF_DISABLE">MIF_DISABLE</a></td>
       <td class="cont" width="60%">Пункт меню недоступен.</td></tr>

     <tr class="cont"><td class="cont" width="40%"><a name="MIF_GRAYED">MIF_GRAYED</a></td>
     <td class="cont" width="60%">Если флаг установлен, то пункт меню доступен в навигации, но не доступен для выбора.</td></tr>

     <tr class="cont"><td class="cont" width="40%"><a name="MIF_HIDDEN">MIF_HIDDEN</a></td>
     <td class="cont" width="60%">Если флаг установлен, то пункт меню не выводится на экран.</td></tr>

      <tr class="cont"><td class="cont" width="40%"><a name="MIF_USETEXTPTR">MIF_USETEXTPTR</a></td>
       <td class="cont" width="60%">Пункт меню использует компоненту <var>Text.TextPtr</var>.</td></tr>
      </table>
    </div>

    <div class=dfn>Text.Text</div>
    <div class=dfndescr>Текст пункта меню.</div>

    <div class=dfn>Text.TextPtr</div>
    <div class=dfndescr>Указатель на текст пункта меню.
      Применяется совместно с флагом <dfn>MIF_USETEXTPTR</dfn>,
      если размера компоненты <var>Text.Text</var> не хватает или используется
      строка из <a href="../language/language_files.html">языкового файла</a>, например:
    <pre class=code>struct FarMenuItemEx Item;
Item.Flags=MIF_USETEXTPTR;
Item.Text.TextPtr=Info.GetMsg(Info.ModuleNumber,MFooItem);</pre>
    </div>

    <div class=dfn>AccelKey</div>
    <div class=dfndescr><a href="../defs/farkeycodes.html">Код клавиши</a>
      FAR Manager для активизации пункта меню. Пример работы - в меню "Commands" нажатие
      клавиши <kbd>Ctrl-O</kbd> аналогично выбору пункта "Panels On/Off".
      В отличие от параметра <var>BreakKeys</var> функции
      <a href="../service_functions/menu.html">Menu</a> компонента <var>AccelKey</var>
      аналогична клавише быстрого доступа (HotKey).
    </div>

    <div class=dfn>Reserved</div>
    <div class=dfndescr>Зарезервировано и должно быть рано 0.</div>

    <div class=dfn>UserData</div>
    <div class=dfndescr>Пользовательские данные, ассоциированные с пунктом
    меню. FAR Manager не использует это поле.</div>
</div>

<h3>Замечания</h3>
<div class=descr>
<ol>
<li>В младшем слове <var>Flags</var> можно указывать код символа, который
    будет использоваться для отображения метки выбора. В этом случае
    система самостоятельно выставит флаг <dfn>MIF_CHECKED</dfn> для
    данного пункта меню.
<li>Если младшее слово <var>Flags</var> равно 0 и выставлен флаг <dfn>MIF_CHECKED</dfn>,
    или если младшее слово <var>Flags</var> равно 1,
    то будет отображаться стандартная метка выбора - символ с кодом
    0FBh (<code>&#8730;</code>)
<li>При использовании флага <dfn>MIF_SEPARATOR</dfn> без текста компонента
    <var>Text.Text</var> (или <var>Text.TextPtr</var>) должна быть
    проинициализирована в 0, например так:
    <pre class=code>struct FarMenuItemEx Item;
Item.Flags=MIF_SEPARATOR;
Item.Text.Text[0]=0;</pre>
    или так:
    </li>
    <pre class=code>struct FarMenuItemEx Item;
Item.Flags=MIF_SEPARATOR|MIF_USETEXTPTR;
Item.Text.TextPtr=NULL;</pre>
</ol>
</div>

<div class=see>Смотрите также:</div><div class=seecont>
<a href="index.html">структуры</a> |
<a href="farmenuitem.html">FarMenuItem</a> |
<a href="../delphi/tfarmenuitemex.html">TFarMenuItemEx</a>
</div>

</body>
</html>