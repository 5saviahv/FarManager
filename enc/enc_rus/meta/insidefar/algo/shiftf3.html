<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>"Архивные команды" (Archive commands/Shift-F3)</title>
<meta http-equiv="Content-Type" Content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../styles/styles.css">
<script language="javascript" src='../../links.js' type="text/javascript"></script>
</head>
<body>
<h1>"Архивные команды" (Archive commands/Shift-F3)</h1>
<div class=navbar>
<a href="index.html">содержание</a>
</div>

<div class=shortdescr>
<p>Когда пользователь нажимает Shift-F3 на файле (группе выделенных файлов), то FAR
для каждого из выделенных файлов выполняет следующие действия:
</div>

<h3>Обычная панель</h3>
  <ul>
   <li>открывает файл, пытается считать максимум 0x20000 байт данных,
       закрывает файл;
   <li>проходит по списку плагинов, поочередно вызывая функцию
       <a href="../../exported_functions/openfileplugin.html">OpenFilePlugin</a>;
   <li>вызывает <a href="../../exported_functions/getfinddata.html">GetFindData</a> для того плагина,
       который первым сказал, что данные его (вернул из OpenFilePlugin значение,
       отличное от <code>INVALID_HANDLE_VALUE</code> и -2; для значения -2 цикл опроса плагинов прекращается);
   <li>вызывает <a href="../../exported_functions/processhostfile.html">ProcessHostFile</a> с параметром OpMode
       равным <a href="../../defs/operation_mode.html#OPM_TOPLEVEL">OPM_TOPLEVEL</a>
      (если плагин возвращает из функции GetFindData значение <code>TRUE</code>);
   <li>вызывает функцию <a href="../../exported_functions/freefinddata.html">FreeFindData</a> для
       того, чтобы плагин освободил память, выделенную функцией GetFindData.
   <li>закрывает плагин, вызывая функцию <a href="../../exported_functions/closeplugin.html">ClosePlugin</a>.
  </ul>
</div>

<h3>Панель плагина</h3>
<div class=descr>
Выполняется, если плагин при вызове <a href="../../exported_functions/getopenplugininfo.html">GetOpenPluginInfo</a>
заполнил поле <dfn>HostFile</dfn> структуры
<a href="../../structures/openplugininfo.html">OpenPluginInfo</a>:
  <ul>
   <li>подготавливает массив структур <a href="../../structures/pluginpanelitem.html">PluginPanelItem</a>;
   <li>вызывает <a href="../../exported_functions/processhostfile.html">ProcessHostFile</a> с параметром OpMode равным 0;
   <li>если <a href="../../exported_functions/processhostfile.html">ProcessHostFile</a> возвращает <code>TRUE</code>, то ставится пометка, что
       <dfn>HostFile</dfn> модифицирован (для того, что впоследствии вызвать
       <a href="../../exported_functions/deletefiles.html">DeleteFiles</a> или
       <a href="../../exported_functions/putfiles.html">PutFiles</a>);
    <li>освобождает память, отведенную под массив структур <a href="../../structures/pluginpanelitem.html">PluginPanelItem</a>.
  </ul>
</div>

</div>
</body>
</html>
