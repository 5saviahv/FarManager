<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>PutFilesW</title>
<meta http-equiv="Content-Type" Content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<script language="javascript" src='../links.js' type="text/javascript"></script>
</head>
<body>

<h1>PutFilesW</h1>
<div class=navbar>
<a href="../index.html">главная</a> |
<a href="index.html">экспортируемые функции</a>
</div>

<div class=shortdescr>
Функция <dfn>PutFilesW</dfn> вызывается для перемещения файлов на панель эмулируемой файловой системы.
(FAR Manager плагину: <em>"этот/эти файл(ы) для тебя, можешь поместить на свою панель"</em>).
</div>

<pre class=syntax>
int WINAPI PutFilesW(
  HANDLE hPlugin,
  struct PluginPanelItem *PanelItem,
  int ItemsNumber,
  int Move,
  const wchar_t *SrcPath,
  int OpMode
);
</pre>
<h3>Параметры</h3>
<div class=descr>
  <div class=dfn>hPlugin</div>
  <div class=dfndescr>Описатель плагина, возвращается функциями <a href="openpluginw.html">OpenPluginW</a> или
    <a href="openfilepluginw.html">OpenFilePluginW</a>.</div>

  <div class=dfn>PanelItem</div>
  <div class=dfndescr>Указатель на массив из структур
    <a href="../structures/pluginpanelitem.html">PluginPanelItem</a>.
    Каждая структура описывает файл для передачи.</div>

  <div class=dfn>ItemsNumber</div>
  <div class=dfndescr>Число элементов в массиве <i>PanelItem</i>.</div>

  <div class=dfn>Move</div>
  <div class=dfndescr>Ноль, если файл должен быть скопирован, иначе перемещён.</div>

  <div class=dfn>SrcPath</div>
  <div class=dfndescr>Путь источника (откуда получим файлы для передачи).</div>

  <div class=dfn>OpMode</div>
  <div class=dfndescr>Комбинация флагов <a href="../defs/operation_mode.html">operation mode</a>.
    Эта функция должна воспринимать флаг OPM_SILENT.
    Также она может использовать флаг OPM_DESCR.
    <p>Если флаг OPM_SILENT не установлен, то возможна выдача
    диалога подтверждения и редактирование пути назначения.
  </div>
</div>

<h3>Возвращаемое значение</h3>
<div class=descr>
В случае удачи, функция должна возвращать 1 или 2. Если плагин возвращает 1,
то FAR Manager пытается установить курсор на последний по дате создания файл текущей
панели. Если плагин возвращает 2, то FAR Manager никаких перемещений курсора не
предпринимает. Если функция завершилась неудачей, должен возвращаться 0.
Если же функция была прервана пользователем, то возвращаемое значение
должно равняться -1.
</div>

<h3>Замечания</h3>
<div class=descr>
<ol>
<li>Если операция была прервана, но часть файлов всё же была скопирована,
  плагин может убрать выделение только с обработанных файлов. Для этого он
  должен сбросить флаг <a href="../structures/pluginpanelitem.html#PPIF_SELECTED">PPIF_SELECTED</a>
  у соответствующих структур файлов,
  передаваемых в функцию через параметр <i>PluginPanelItem</i>.
</ol>
</div>

<div class=see>Смотрите также:</div><div class=seecont>
<a href="getfilesw.html">GetFilesW</a>,
<a href="../service_functions/getdirlist.html">GetDirList</a>,
<a href="../service_functions/getplugindirlist.html">GetPluginDirList</a>

</div>

</body>
</html>
